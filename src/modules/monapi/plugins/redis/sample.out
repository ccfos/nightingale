=== RUN   TestCollect
2021-03-09 18:53:12.445852 WARNING redis/redis.go:198 Server URL found without scheme; please update your configuration file
2021-03-09 18:53:12.446842 DEBUG metric/metric.go:61 unable to convert field to float64 redis_aof_last_bgrewrite_status map[port:6379 replication_role:master server:127.0.0.1] value: ok
2021-03-09 18:53:12.446896 DEBUG metric/metric.go:61 unable to convert field to float64 redis_aof_last_write_status map[port:6379 replication_role:master server:127.0.0.1] value: ok
2021-03-09 18:53:12.446911 DEBUG metric/metric.go:61 unable to convert field to float64 redis_redis_version map[port:6379 replication_role:master server:127.0.0.1] value: 3.2.12
2021-03-09 18:53:12.446918 DEBUG metric/metric.go:61 unable to convert field to float64 redis_maxmemory_policy map[port:6379 replication_role:master server:127.0.0.1] value: noeviction
2021-03-09 18:53:12.446933 DEBUG metric/metric.go:61 unable to convert field to float64 redis_rdb_last_bgsave_status map[port:6379 replication_role:master server:127.0.0.1] value: ok
    util.go:96: 0 GAUGE /redis_cmdstat_usec_per_call/command=get,port=6379,replication_role=master,server=127.0.0.1 1.420000
    util.go:96: 1 GAUGE /redis_cmdstat_calls/command=get,port=6379,replication_role=master,server=127.0.0.1 25083.000000
    util.go:96: 2 GAUGE /redis_cmdstat_usec/command=get,port=6379,replication_role=master,server=127.0.0.1 35679.000000
    util.go:96: 3 GAUGE /redis_cmdstat_usec/command=set,port=6379,replication_role=master,server=127.0.0.1 33433.000000
    util.go:96: 4 GAUGE /redis_cmdstat_usec_per_call/command=set,port=6379,replication_role=master,server=127.0.0.1 3.940000
    util.go:96: 5 GAUGE /redis_cmdstat_calls/command=set,port=6379,replication_role=master,server=127.0.0.1 8484.000000
    util.go:96: 6 GAUGE /redis_cmdstat_calls/command=exists,port=6379,replication_role=master,server=127.0.0.1 372387.000000
    util.go:96: 7 GAUGE /redis_cmdstat_usec/command=exists,port=6379,replication_role=master,server=127.0.0.1 326854.000000
    util.go:96: 8 GAUGE /redis_cmdstat_usec_per_call/command=exists,port=6379,replication_role=master,server=127.0.0.1 0.880000
    util.go:96: 9 GAUGE /redis_cmdstat_usec/command=lpush,port=6379,replication_role=master,server=127.0.0.1 1184855.000000
    util.go:96: 10 GAUGE /redis_cmdstat_usec_per_call/command=lpush,port=6379,replication_role=master,server=127.0.0.1 4.100000
    util.go:96: 11 GAUGE /redis_cmdstat_calls/command=lpush,port=6379,replication_role=master,server=127.0.0.1 288752.000000
    util.go:96: 12 GAUGE /redis_cmdstat_calls/command=rpop,port=6379,replication_role=master,server=127.0.0.1 28499902.000000
    util.go:96: 13 GAUGE /redis_cmdstat_usec/command=rpop,port=6379,replication_role=master,server=127.0.0.1 10735311.000000
    util.go:96: 14 GAUGE /redis_cmdstat_usec_per_call/command=rpop,port=6379,replication_role=master,server=127.0.0.1 0.380000
    util.go:96: 15 GAUGE /redis_cmdstat_usec/command=brpop,port=6379,replication_role=master,server=127.0.0.1 5646355.000000
    util.go:96: 16 GAUGE /redis_cmdstat_usec_per_call/command=brpop,port=6379,replication_role=master,server=127.0.0.1 4.990000
    util.go:96: 17 GAUGE /redis_cmdstat_calls/command=brpop,port=6379,replication_role=master,server=127.0.0.1 1132255.000000
    util.go:96: 18 GAUGE /redis_cmdstat_usec_per_call/command=zadd,port=6379,replication_role=master,server=127.0.0.1 6.070000
    util.go:96: 19 GAUGE /redis_cmdstat_calls/command=zadd,port=6379,replication_role=master,server=127.0.0.1 528916.000000
    util.go:96: 20 GAUGE /redis_cmdstat_usec/command=zadd,port=6379,replication_role=master,server=127.0.0.1 3208335.000000
    util.go:96: 21 GAUGE /redis_cmdstat_usec_per_call/command=zrangebyscore,port=6379,replication_role=master,server=127.0.0.1 67.000000
    util.go:96: 22 GAUGE /redis_cmdstat_calls/command=zrangebyscore,port=6379,replication_role=master,server=127.0.0.1 1.000000
    util.go:96: 23 GAUGE /redis_cmdstat_usec/command=zrangebyscore,port=6379,replication_role=master,server=127.0.0.1 67.000000
    util.go:96: 24 GAUGE /redis_cmdstat_calls/command=zscore,port=6379,replication_role=master,server=127.0.0.1 1185752.000000
    util.go:96: 25 GAUGE /redis_cmdstat_usec/command=zscore,port=6379,replication_role=master,server=127.0.0.1 8707384.000000
    util.go:96: 26 GAUGE /redis_cmdstat_usec_per_call/command=zscore,port=6379,replication_role=master,server=127.0.0.1 7.340000
    util.go:96: 27 GAUGE /redis_cmdstat_usec_per_call/command=hset,port=6379,replication_role=master,server=127.0.0.1 5.600000
    util.go:96: 28 GAUGE /redis_cmdstat_calls/command=hset,port=6379,replication_role=master,server=127.0.0.1 2795.000000
    util.go:96: 29 GAUGE /redis_cmdstat_usec/command=hset,port=6379,replication_role=master,server=127.0.0.1 15656.000000
    util.go:96: 30 GAUGE /redis_cmdstat_calls/command=hget,port=6379,replication_role=master,server=127.0.0.1 1862.000000
    util.go:96: 31 GAUGE /redis_cmdstat_usec/command=hget,port=6379,replication_role=master,server=127.0.0.1 6220.000000
    util.go:96: 32 GAUGE /redis_cmdstat_usec_per_call/command=hget,port=6379,replication_role=master,server=127.0.0.1 3.340000
    util.go:96: 33 GAUGE /redis_cmdstat_calls/command=hmget,port=6379,replication_role=master,server=127.0.0.1 5600.000000
    util.go:96: 34 GAUGE /redis_cmdstat_usec/command=hmget,port=6379,replication_role=master,server=127.0.0.1 40432.000000
    util.go:96: 35 GAUGE /redis_cmdstat_usec_per_call/command=hmget,port=6379,replication_role=master,server=127.0.0.1 7.220000
    util.go:96: 36 GAUGE /redis_cmdstat_usec/command=hincrbyfloat,port=6379,replication_role=master,server=127.0.0.1 35022977.000000
    util.go:96: 37 GAUGE /redis_cmdstat_usec_per_call/command=hincrbyfloat,port=6379,replication_role=master,server=127.0.0.1 8.280000
    util.go:96: 38 GAUGE /redis_cmdstat_calls/command=hincrbyfloat,port=6379,replication_role=master,server=127.0.0.1 4231328.000000
    util.go:96: 39 GAUGE /redis_cmdstat_calls/command=hdel,port=6379,replication_role=master,server=127.0.0.1 82.000000
    util.go:96: 40 GAUGE /redis_cmdstat_usec/command=hdel,port=6379,replication_role=master,server=127.0.0.1 284.000000
    util.go:96: 41 GAUGE /redis_cmdstat_usec_per_call/command=hdel,port=6379,replication_role=master,server=127.0.0.1 3.460000
    util.go:96: 42 GAUGE /redis_cmdstat_usec_per_call/command=hkeys,port=6379,replication_role=master,server=127.0.0.1 1.280000
    util.go:96: 43 GAUGE /redis_cmdstat_calls/command=hkeys,port=6379,replication_role=master,server=127.0.0.1 61289.000000
    util.go:96: 44 GAUGE /redis_cmdstat_usec/command=hkeys,port=6379,replication_role=master,server=127.0.0.1 78581.000000
    util.go:96: 45 GAUGE /redis_cmdstat_usec/command=select,port=6379,replication_role=master,server=127.0.0.1 35.000000
    util.go:96: 46 GAUGE /redis_cmdstat_usec_per_call/command=select,port=6379,replication_role=master,server=127.0.0.1 0.710000
    util.go:96: 47 GAUGE /redis_cmdstat_calls/command=select,port=6379,replication_role=master,server=127.0.0.1 49.000000
    util.go:96: 48 GAUGE /redis_cmdstat_calls/command=auth,port=6379,replication_role=master,server=127.0.0.1 52586.000000
    util.go:96: 49 GAUGE /redis_cmdstat_usec/command=auth,port=6379,replication_role=master,server=127.0.0.1 68536.000000
    util.go:96: 50 GAUGE /redis_cmdstat_usec_per_call/command=auth,port=6379,replication_role=master,server=127.0.0.1 1.300000
    util.go:96: 51 GAUGE /redis_cmdstat_usec_per_call/command=ping,port=6379,replication_role=master,server=127.0.0.1 0.260000
    util.go:96: 52 GAUGE /redis_cmdstat_calls/command=ping,port=6379,replication_role=master,server=127.0.0.1 36302293.000000
    util.go:96: 53 GAUGE /redis_cmdstat_usec/command=ping,port=6379,replication_role=master,server=127.0.0.1 9316429.000000
    util.go:96: 54 GAUGE /redis_cmdstat_calls/command=info,port=6379,replication_role=master,server=127.0.0.1 10216.000000
    util.go:96: 55 GAUGE /redis_cmdstat_usec/command=info,port=6379,replication_role=master,server=127.0.0.1 613444.000000
    util.go:96: 56 GAUGE /redis_cmdstat_usec_per_call/command=info,port=6379,replication_role=master,server=127.0.0.1 60.050000
    util.go:96: 57 GAUGE /redis_keyspace_keys/database=db0,port=6379,replication_role=master,server=127.0.0.1 20.000000
    util.go:96: 58 GAUGE /redis_keyspace_expires/database=db0,port=6379,replication_role=master,server=127.0.0.1 16.000000
    util.go:96: 59 GAUGE /redis_keyspace_avg_ttl/database=db0,port=6379,replication_role=master,server=127.0.0.1 2053042783.000000
    util.go:96: 60 GAUGE /redis_keyspace_avg_ttl/database=db1,port=6379,replication_role=master,server=127.0.0.1 0.000000
    util.go:96: 61 GAUGE /redis_keyspace_keys/database=db1,port=6379,replication_role=master,server=127.0.0.1 13.000000
    util.go:96: 62 GAUGE /redis_keyspace_expires/database=db1,port=6379,replication_role=master,server=127.0.0.1 0.000000
    util.go:96: 63 GAUGE /redis_cluster_enabled/port=6379,replication_role=master,server=127.0.0.1 0.000000
    util.go:96: 64 GAUGE /redis_instantaneous_ops_per_sec/port=6379,replication_role=master,server=127.0.0.1 88.000000
    util.go:96: 65 GAUGE /redis_aof_last_rewrite_time_sec/port=6379,replication_role=master,server=127.0.0.1 -1.000000
    util.go:96: 66 GAUGE /redis_sync_partial_err/port=6379,replication_role=master,server=127.0.0.1 0.000000
    util.go:96: 67 GAUGE /redis_used_memory_peak/port=6379,replication_role=master,server=127.0.0.1 35650504.000000
    util.go:96: 68 GAUGE /redis_rdb_bgsave_in_progress/port=6379,replication_role=master,server=127.0.0.1 0.000000
    util.go:96: 69 GAUGE /redis_used_cpu_sys/port=6379,replication_role=master,server=127.0.0.1 1062.770000
    util.go:96: 70 GAUGE /redis_lru_clock/port=6379,replication_role=master,server=127.0.0.1 4674456.000000
    util.go:96: 71 GAUGE /redis_used_memory_lua/port=6379,replication_role=master,server=127.0.0.1 37888.000000
    util.go:96: 72 GAUGE /redis_client_biggest_input_buf/port=6379,replication_role=master,server=127.0.0.1 0.000000
    util.go:96: 73 GAUGE /redis_maxmemory/port=6379,replication_role=master,server=127.0.0.1 0.000000
    util.go:96: 74 GAUGE /redis_used_memory_rss/port=6379,replication_role=master,server=127.0.0.1 6713344.000000
    util.go:96: 75 GAUGE /redis_keyspace_hitrate/port=6379,replication_role=master,server=127.0.0.1 0.952114
    util.go:96: 76 GAUGE /redis_total_net_output_bytes/port=6379,replication_role=master,server=127.0.0.1 711227059.000000
    util.go:96: 77 GAUGE /redis_mem_fragmentation_ratio/port=6379,replication_role=master,server=127.0.0.1 1.090000
    util.go:96: 78 GAUGE /redis_used_cpu_user/port=6379,replication_role=master,server=127.0.0.1 401.600000
    util.go:96: 79 GAUGE /redis_keyspace_misses/port=6379,replication_role=master,server=127.0.0.1 61274.000000
    util.go:96: 80 GAUGE /redis_total_system_memory/port=6379,replication_role=master,server=127.0.0.1 134967951360.000000
    util.go:96: 81 GAUGE /redis_rejected_connections/port=6379,replication_role=master,server=127.0.0.1 0.000000
    util.go:96: 82 GAUGE /redis_aof_rewrite_scheduled/port=6379,replication_role=master,server=127.0.0.1 0.000000
    util.go:96: 83 GAUGE /redis_blocked_clients/port=6379,replication_role=master,server=127.0.0.1 2.000000
    util.go:96: 84 GAUGE /redis_repl_backlog_histlen/port=6379,replication_role=master,server=127.0.0.1 0.000000
    util.go:96: 85 GAUGE /redis_latest_fork_usec/port=6379,replication_role=master,server=127.0.0.1 295.000000
    util.go:96: 86 GAUGE /redis_connected_slaves/port=6379,replication_role=master,server=127.0.0.1 0.000000
    util.go:96: 87 GAUGE /redis_instantaneous_output_kbps/port=6379,replication_role=master,server=127.0.0.1 0.990000
    util.go:96: 88 GAUGE /redis_used_cpu_sys_children/port=6379,replication_role=master,server=127.0.0.1 6.000000
    util.go:96: 89 GAUGE /redis_migrate_cached_sockets/port=6379,replication_role=master,server=127.0.0.1 0.000000
    util.go:96: 90 GAUGE /redis_rdb_changes_since_last_save/port=6379,replication_role=master,server=127.0.0.1 2330.000000
    util.go:96: 91 GAUGE /redis_pubsub_patterns/port=6379,replication_role=master,server=127.0.0.1 0.000000
    util.go:96: 92 GAUGE /redis_total_commands_processed/port=6379,replication_role=master,server=127.0.0.1 72709632.000000
    util.go:96: 93 GAUGE /redis_master_repl_offset/port=6379,replication_role=master,server=127.0.0.1 0.000000
    util.go:96: 94 GAUGE /redis_used_memory/port=6379,replication_role=master,server=127.0.0.1 6133328.000000
    util.go:96: 95 GAUGE /redis_repl_backlog_first_byte_offset/port=6379,replication_role=master,server=127.0.0.1 0.000000
    util.go:96: 96 GAUGE /redis_rdb_last_bgsave_time_sec/port=6379,replication_role=master,server=127.0.0.1 0.000000
    util.go:96: 97 GAUGE /redis_pubsub_channels/port=6379,replication_role=master,server=127.0.0.1 0.000000
    util.go:96: 98 GAUGE /redis_sync_full/port=6379,replication_role=master,server=127.0.0.1 0.000000
    util.go:96: 99 GAUGE /redis_aof_current_rewrite_time_sec/port=6379,replication_role=master,server=127.0.0.1 -1.000000
    util.go:96: 100 GAUGE /redis_loading/port=6379,replication_role=master,server=127.0.0.1 0.000000
    util.go:96: 101 GAUGE /redis_rdb_current_bgsave_time_sec/port=6379,replication_role=master,server=127.0.0.1 -1.000000
    util.go:96: 102 GAUGE /redis_rdb_last_save_time_elapsed/port=6379,replication_role=master,server=127.0.0.1 242.000000
    util.go:96: 103 GAUGE /redis_aof_rewrite_in_progress/port=6379,replication_role=master,server=127.0.0.1 0.000000
    util.go:96: 104 GAUGE /redis_repl_backlog_size/port=6379,replication_role=master,server=127.0.0.1 1048576.000000
    util.go:96: 105 GAUGE /redis_instantaneous_input_kbps/port=6379,replication_role=master,server=127.0.0.1 2.660000
    util.go:96: 106 GAUGE /redis_aof_enabled/port=6379,replication_role=master,server=127.0.0.1 0.000000
    util.go:96: 107 GAUGE /redis_total_connections_received/port=6379,replication_role=master,server=127.0.0.1 52761.000000
    util.go:96: 108 GAUGE /redis_used_cpu_user_children/port=6379,replication_role=master,server=127.0.0.1 27.650000
    util.go:96: 109 GAUGE /redis_total_net_input_bytes/port=6379,replication_role=master,server=127.0.0.1 2238891986.000000
    util.go:96: 110 GAUGE /redis_client_longest_output_list/port=6379,replication_role=master,server=127.0.0.1 0.000000
    util.go:96: 111 GAUGE /redis_evicted_keys/port=6379,replication_role=master,server=127.0.0.1 0.000000
    util.go:96: 112 GAUGE /redis_expired_keys/port=6379,replication_role=master,server=127.0.0.1 0.000000
    util.go:96: 113 GAUGE /redis_repl_backlog_active/port=6379,replication_role=master,server=127.0.0.1 0.000000
    util.go:96: 114 GAUGE /redis_clients/port=6379,replication_role=master,server=127.0.0.1 53.000000
    util.go:96: 115 GAUGE /redis_rdb_last_save_time/port=6379,replication_role=master,server=127.0.0.1 1615286950.000000
    util.go:96: 116 GAUGE /redis_sync_partial_ok/port=6379,replication_role=master,server=127.0.0.1 0.000000
    util.go:96: 117 GAUGE /redis_keyspace_hits/port=6379,replication_role=master,server=127.0.0.1 1218313.000000
    util.go:96: 118 GAUGE /redis_uptime/port=6379,replication_role=master,server=127.0.0.1 612872.000000
--- PASS: TestCollect (0.00s)
PASS
ok  	github.com/didi/nightingale/src/modules/monapi/plugins/redis	0.009s
