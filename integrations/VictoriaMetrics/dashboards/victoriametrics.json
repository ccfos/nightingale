{
  "name": "VictoriaMetrics - Cluster",
  "tags": "",
  "ident": "",
  "configs": {
    "version": "2.0.0",
    "links": [
      {
        "title": "Cluster Wiki",
        "url": "https://github.com/VictoriaMetrics/VictoriaMetrics/wiki/Cluster-VictoriaMetrics",
        "targetBlank": true
      },
      {
        "title": "Found a bug?",
        "url": "https://github.com/VictoriaMetrics/VictoriaMetrics/issues",
        "targetBlank": true
      },
      {
        "title": "New releases",
        "url": "https://github.com/VictoriaMetrics/VictoriaMetrics/releases",
        "targetBlank": true
      }
    ],
    "var": [
      {
        "name": "job",
        "type": "query",
        "datasource": {
          "cate": "prometheus"
        },
        "definition": "label_values(vm_app_version{job=~\"^vm-(insert|select|storage).*\"}, job)",
        "reg": "",
        "multi": true,
        "allOption": true
      },
      {
        "name": "insert",
        "type": "query",
        "datasource": {
          "cate": "prometheus"
        },
        "definition": "label_values(vm_app_version{job=~\"$job\", version=~\"^vminsert.*\"}, job)",
        "reg": "",
        "multi": false
      },
      {
        "name": "select",
        "type": "query",
        "datasource": {
          "cate": "prometheus"
        },
        "definition": "label_values(vm_app_version{job=~\"$job\", version=~\"^vmselect.*\"}, job)",
        "reg": "",
        "multi": false
      },
      {
        "name": "storage",
        "type": "query",
        "datasource": {
          "cate": "prometheus"
        },
        "definition": "label_values(vm_app_version{job=~\"$job\", version=~\"^vmstorage.*\"}, job)",
        "reg": "",
        "multi": false
      },
      {
        "name": "instance",
        "type": "query",
        "datasource": {
          "cate": "prometheus"
        },
        "definition": "label_values(vm_app_version{job=~\"$job\"}, instance)",
        "reg": "",
        "multi": true,
        "allOption": true,
        "allValue": ".*"
      }
    ],
    "panels": [
      {
        "version": "2.0.0",
        "id": "693f2a6f-0328-4900-9bac-4d508cbcac1d",
        "type": "row",
        "name": "状态",
        "collapsed": true,
        "layout": {
          "h": 1,
          "w": 24,
          "x": 0,
          "y": 0,
          "i": "693f2a6f-0328-4900-9bac-4d508cbcac1d",
          "isResizable": false
        },
        "panels": []
      },
      {
        "type": "stat",
        "id": "4b227cc2-3d8f-4e43-97de-0eb34537fcdf",
        "layout": {
          "h": 3,
          "w": 6,
          "x": 0,
          "y": 1,
          "i": "4b227cc2-3d8f-4e43-97de-0eb34537fcdf",
          "isResizable": true
        },
        "version": "2.0.0",
        "datasourceCate": "prometheus",
        "targets": [
          {
            "refId": "A",
            "expr": "sum(vm_rows{job=~\"$storage\", type!~\"indexdb.*\"})",
            "legend": ""
          }
        ],
        "name": "Total datapoints",
        "links": [],
        "description": "当前存储中的数据点大小",
        "maxPerRow": 4,
        "custom": {
          "textMode": "value",
          "graphMode": "none",
          "colorMode": "value",
          "calc": "lastNotNull",
          "valueField": "Value",
          "colSpan": 1,
          "textSize": {}
        },
        "options": {
          "valueMappings": [],
          "standardOptions": {
            "util": "none"
          },
          "thresholds": {
            "steps": [
              {
                "color": "#73BF69",
                "value": null,
                "type": "base"
              }
            ]
          }
        }
      },
      {
        "type": "stat",
        "id": "9b17094d-58de-4e1a-a2c4-40aa438f483a",
        "layout": {
          "h": 3,
          "w": 6,
          "x": 6,
          "y": 1,
          "i": "9b17094d-58de-4e1a-a2c4-40aa438f483a",
          "isResizable": true
        },
        "version": "2.0.0",
        "datasourceCate": "prometheus",
        "targets": [
          {
            "refId": "A",
            "expr": "sum(rate(vm_vminsert_metrics_read_total{job=~\"$storage\", instance=~\"$instance\"}[5m])) ",
            "legend": ""
          }
        ],
        "name": "Ingestion rate",
        "links": [],
        "description": "显示数据点5分钟时间范围抓取时序值大小，包括复制因子",
        "maxPerRow": 4,
        "custom": {
          "textMode": "value",
          "graphMode": "none",
          "colorMode": "value",
          "calc": "lastNotNull",
          "valueField": "Value",
          "colSpan": 1,
          "textSize": {}
        },
        "options": {
          "valueMappings": [],
          "standardOptions": {
            "util": "none"
          },
          "thresholds": {
            "steps": [
              {
                "color": "#73BF69",
                "value": null,
                "type": "base"
              }
            ]
          }
        }
      },
      {
        "type": "stat",
        "id": "6c44ab37-aae0-469d-ab3f-1d117f6b66b5",
        "layout": {
          "h": 3,
          "w": 6,
          "x": 12,
          "y": 1,
          "i": "6c44ab37-aae0-469d-ab3f-1d117f6b66b5",
          "isResizable": true
        },
        "version": "2.0.0",
        "datasourceCate": "prometheus",
        "targets": [
          {
            "refId": "A",
            "expr": "sum(rate(vm_http_requests_total{job=~\"$job\", instance=~\"$instance\", path=~\"/select/.*\"}[5m]))",
            "legend": ""
          }
        ],
        "name": "Read requests",
        "links": [],
        "description": "显示查询模块的HTTP读请求速率",
        "maxPerRow": 4,
        "custom": {
          "textMode": "value",
          "graphMode": "none",
          "colorMode": "value",
          "calc": "lastNotNull",
          "valueField": "Value",
          "colSpan": 1,
          "textSize": {}
        },
        "options": {
          "valueMappings": [],
          "standardOptions": {
            "util": "none"
          },
          "thresholds": {
            "steps": [
              {
                "color": "#73BF69",
                "value": null,
                "type": "base"
              }
            ]
          }
        }
      },
      {
        "type": "stat",
        "id": "c374afde-795c-4046-805b-2a0934813cf2",
        "layout": {
          "h": 3,
          "w": 6,
          "x": 18,
          "y": 1,
          "i": "c374afde-795c-4046-805b-2a0934813cf2",
          "isResizable": true
        },
        "version": "2.0.0",
        "datasourceCate": "prometheus",
        "targets": [
          {
            "refId": "A",
            "expr": "sum(vm_available_cpu_cores{job=~\"$job\", instance=~\"$instance\"})",
            "legend": ""
          }
        ],
        "name": "Available CPU",
        "links": [],
        "description": "所有组件可用CPU总数",
        "maxPerRow": 4,
        "custom": {
          "textMode": "value",
          "graphMode": "none",
          "colorMode": "value",
          "calc": "lastNotNull",
          "valueField": "Value",
          "colSpan": 1,
          "textSize": {}
        },
        "options": {
          "valueMappings": [],
          "standardOptions": {
            "util": "none"
          },
          "thresholds": {
            "steps": [
              {
                "color": "#73BF69",
                "value": null,
                "type": "base"
              }
            ]
          }
        }
      },
      {
        "type": "stat",
        "id": "a2a05daa-56fc-40b3-b551-282470400963",
        "layout": {
          "h": 3,
          "w": 6,
          "x": 0,
          "y": 4,
          "i": "a2a05daa-56fc-40b3-b551-282470400963",
          "isResizable": true
        },
        "version": "2.0.0",
        "datasourceCate": "prometheus",
        "targets": [
          {
            "refId": "A",
            "expr": "sum(max_over_time(vm_cache_entries{job=~\"$job\", instance=~\"$instance\", type=\"storage/hour_metric_ids\"}[1h]))",
            "legend": ""
          }
        ],
        "name": "Active series",
        "links": [],
        "description": "显示在过去一小时内插入新数据点的活动时间序列的数量，如果值变高可能会导致抓取速度变慢\n\n具体详情： https://docs.victoriametrics.com/FAQ.html#what-is-an-active-time-series",
        "maxPerRow": 4,
        "custom": {
          "textMode": "value",
          "graphMode": "none",
          "colorMode": "value",
          "calc": "lastNotNull",
          "valueField": "Value",
          "colSpan": 1,
          "textSize": {}
        },
        "options": {
          "valueMappings": [],
          "standardOptions": {
            "util": "none"
          },
          "thresholds": {
            "steps": [
              {
                "color": "#73BF69",
                "value": null,
                "type": "base"
              }
            ]
          }
        }
      },
      {
        "type": "stat",
        "id": "2f7a302b-ac69-4054-9ce9-7d18177c508c",
        "layout": {
          "h": 3,
          "w": 6,
          "x": 6,
          "y": 4,
          "i": "2f7a302b-ac69-4054-9ce9-7d18177c508c",
          "isResizable": true
        },
        "version": "2.0.0",
        "datasourceCate": "prometheus",
        "targets": [
          {
            "refId": "A",
            "expr": "sum(vm_data_size_bytes{job=~\"$storage\"})",
            "legend": ""
          }
        ],
        "name": "Disk space usage",
        "links": [],
        "description": "已经使用的磁盘空间总量",
        "maxPerRow": 4,
        "custom": {
          "textMode": "value",
          "graphMode": "none",
          "colorMode": "value",
          "calc": "lastNotNull",
          "valueField": "Value",
          "colSpan": 1,
          "textSize": {}
        },
        "options": {
          "valueMappings": [],
          "standardOptions": {
            "util": "bytesIEC"
          },
          "thresholds": {
            "steps": [
              {
                "color": "#73BF69",
                "value": null,
                "type": "base"
              }
            ]
          }
        }
      },
      {
        "type": "stat",
        "id": "d96f568e-20ca-47d6-a12a-c13a8754910b",
        "layout": {
          "h": 3,
          "w": 6,
          "x": 12,
          "y": 4,
          "i": "d96f568e-20ca-47d6-a12a-c13a8754910b",
          "isResizable": true
        },
        "version": "2.0.0",
        "datasourceCate": "prometheus",
        "targets": [
          {
            "refId": "A",
            "expr": "sum(vm_data_size_bytes{job=~\"$storage\", type!~\"indexdb.*\"}) / sum(vm_rows{job=~\"$storage\", type!~\"indexdb.*\"})",
            "legend": ""
          }
        ],
        "name": "Bytes per point",
        "links": [],
        "description": "每个数据点的平均磁盘使用率",
        "maxPerRow": 4,
        "custom": {
          "textMode": "value",
          "graphMode": "none",
          "colorMode": "value",
          "calc": "lastNotNull",
          "valueField": "Value",
          "colSpan": 1,
          "textSize": {}
        },
        "options": {
          "valueMappings": [],
          "standardOptions": {
            "util": "percentUnit",
            "decimals": 2
          },
          "thresholds": {
            "steps": [
              {
                "color": "#73BF69",
                "value": null,
                "type": "base"
              }
            ]
          }
        }
      },
      {
        "version": "2.0.0",
        "id": "67dcc1fa-5d51-44b2-af7b-45ea285e8d78",
        "type": "stat",
        "name": "Available memory",
        "description": "Total size of available memory for all VM components.",
        "links": [],
        "layout": {
          "h": 3,
          "w": 6,
          "x": 18,
          "y": 4,
          "i": "67dcc1fa-5d51-44b2-af7b-45ea285e8d78",
          "isResizable": true
        },
        "targets": [
          {
            "refId": "A",
            "expr": "sum(vm_available_memory_bytes{job=~\"$job\", instance=~\"$instance\"})",
            "legend": ""
          }
        ],
        "options": {
          "valueMappings": [],
          "thresholds": {
            "mode": "absolute",
            "style": "line",
            "steps": [
              {
                "color": "#73BF69",
                "value": null,
                "type": "base"
              }
            ]
          },
          "standardOptions": {
            "util": "bytesIEC"
          },
          "legend": {
            "displayMode": "list"
          },
          "tooltip": {
            "mode": "multi"
          }
        },
        "custom": {
          "version": "2.0.0",
          "textMode": "value",
          "calc": "lastNotNull",
          "colorMode": "value"
        },
        "maxPerRow": 4
      },
      {
        "type": "table",
        "id": "f27606ef-b371-4d0a-a48b-4f935e1f5100",
        "layout": {
          "h": 5,
          "w": 12,
          "x": 0,
          "y": 7,
          "i": "f27606ef-b371-4d0a-a48b-4f935e1f5100",
          "isResizable": true
        },
        "version": "2.0.0",
        "datasourceCate": "prometheus",
        "targets": [
          {
            "refId": "A",
            "expr": "sum(vm_app_version{job=~\"$job\", instance=~\"$instance\"}) by(job, short_version)"
          }
        ],
        "links": [],
        "description": "当前JOB名称，版本号，副本数",
        "maxPerRow": 4,
        "custom": {
          "showHeader": true,
          "colorMode": "value",
          "calc": "lastNotNull",
          "displayMode": "seriesToRows"
        },
        "options": {
          "standardOptions": {}
        },
        "overrides": [
          {}
        ]
      },
      {
        "type": "timeseries",
        "id": "66c86f6a-8ef1-46ed-8f22-f04677931c28",
        "layout": {
          "h": 5,
          "w": 12,
          "x": 12,
          "y": 7,
          "i": "66c86f6a-8ef1-46ed-8f22-f04677931c28",
          "isResizable": true
        },
        "version": "2.0.0",
        "datasourceCate": "prometheus",
        "targets": [
          {
            "refId": "A",
            "expr": "sum(min_over_time(up{job=~\"$job\", instance=~\"$instance\"}[5m])) by (job)",
            "legend": "{{job}}"
          }
        ],
        "name": "Uptime ($job)",
        "links": [],
        "description": "当前组件副本数",
        "maxPerRow": 4,
        "options": {
          "tooltip": {
            "mode": "multi"
          },
          "legend": {
            "displayMode": "list",
            "placement": "right"
          },
          "standardOptions": {
            "util": "none",
            "decimals": 0
          },
          "thresholds": {
            "steps": [
              {
                "color": "#73BF69",
                "value": null,
                "type": "base"
              },
              {
                "color": "#F2495C",
                "value": 80
              }
            ]
          }
        },
        "custom": {
          "drawStyle": "lines",
          "lineInterpolation": "linear",
          "spanNulls": false,
          "lineWidth": 1,
          "fillOpacity": 0.5,
          "gradientMode": "none",
          "stack": "off",
          "scaleDistribution": {
            "type": "linear"
          }
        }
      },
      {
        "version": "2.0.0",
        "id": "72a53a57-6b0e-4457-ab3d-2af04fefa79e",
        "type": "row",
        "name": "Overview",
        "collapsed": true,
        "layout": {
          "h": 1,
          "w": 24,
          "x": 0,
          "y": 12,
          "i": "72a53a57-6b0e-4457-ab3d-2af04fefa79e",
          "isResizable": false
        },
        "panels": []
      },
      {
        "type": "timeseries",
        "id": "e13f37cd-3543-434d-844c-a30154a262e4",
        "layout": {
          "h": 8,
          "w": 12,
          "x": 0,
          "y": 13,
          "i": "e13f37cd-3543-434d-844c-a30154a262e4",
          "isResizable": true
        },
        "version": "2.0.0",
        "datasourceCate": "prometheus",
        "targets": [
          {
            "refId": "A",
            "expr": "sum(rate(vm_rows_inserted_total{job=~\"$job\", instance=~\"$instance\"}[5m])) by (type) > 0 ",
            "legend": "{{type}}"
          }
        ],
        "name": "Datapoints ingestion rate ($instance)",
        "links": [],
        "description": "在复制之前，每秒有多少个数据点通过协议插入到集群中",
        "maxPerRow": 4,
        "options": {
          "tooltip": {
            "mode": "multi"
          },
          "legend": {
            "displayMode": "list",
            "placement": "bottom"
          },
          "standardOptions": {
            "util": "none",
            "min": 0
          },
          "thresholds": {
            "steps": [
              {
                "color": "#73BF69",
                "value": null,
                "type": "base"
              },
              {
                "color": "#F2495C",
                "value": 80
              }
            ]
          }
        },
        "custom": {
          "drawStyle": "lines",
          "lineInterpolation": "linear",
          "spanNulls": false,
          "lineWidth": 1,
          "fillOpacity": 0.1,
          "gradientMode": "none",
          "stack": "normal",
          "scaleDistribution": {
            "type": "linear"
          }
        }
      },
      {
        "type": "timeseries",
        "id": "f0cbee55-badd-4cb6-adfe-cb22c0abdc05",
        "layout": {
          "h": 8,
          "w": 12,
          "x": 12,
          "y": 13,
          "i": "f0cbee55-badd-4cb6-adfe-cb22c0abdc05",
          "isResizable": true
        },
        "version": "2.0.0",
        "datasourceCate": "prometheus",
        "targets": [
          {
            "refId": "A",
            "expr": "sum(rate(vm_http_requests_total{job=~\"$job\", instance=~\"$instance\", path!~\"/favicon.ico\"}[5m])) by (path) > 0",
            "legend": "{{path}}"
          }
        ],
        "name": "Requests rate ($instance)",
        "links": [],
        "description": "5分钟请求速率：\n* ' * ' -不支持的查询路径 \n* ' /write ' -插入到虚拟机 \n* ' /metrics ' -查询虚拟机系统指标 \n* ' /query ' -查询即时值 \n* ' /query_range ' -查询时间范围 \n* ' /series ' -匹配某个标签集 \n* ' /label/{}/values ' -查询标签值列表(主要是变量)",
        "maxPerRow": 4,
        "options": {
          "tooltip": {
            "mode": "multi"
          },
          "legend": {
            "displayMode": "list",
            "placement": "bottom"
          },
          "standardOptions": {
            "util": "none",
            "min": 0
          },
          "thresholds": {
            "steps": [
              {
                "color": "#73BF69",
                "value": null,
                "type": "base"
              },
              {
                "color": "#F2495C",
                "value": 80
              }
            ]
          }
        },
        "custom": {
          "drawStyle": "lines",
          "lineInterpolation": "linear",
          "spanNulls": false,
          "lineWidth": 1,
          "fillOpacity": 0.5,
          "gradientMode": "none",
          "stack": "off",
          "scaleDistribution": {
            "type": "linear"
          }
        }
      },
      {
        "type": "timeseries",
        "id": "bf981fc8-7690-41b3-81ef-207687218564",
        "layout": {
          "h": 8,
          "w": 12,
          "x": 0,
          "y": 21,
          "i": "bf981fc8-7690-41b3-81ef-207687218564",
          "isResizable": true
        },
        "version": "2.0.0",
        "datasourceCate": "prometheus",
        "targets": [
          {
            "refId": "A",
            "expr": "sum(vm_cache_entries{job=~\"$job\", instance=~\"$instance\", type=\"storage/hour_metric_ids\"})",
            "legend": "Active time series"
          }
        ],
        "name": "Active time series ($instance)",
        "links": [],
        "description": "显示所有存储节点在过去一小时内插入新数据点的活动时间序列的数量，如果值过高可能会导致查询速度变慢。",
        "maxPerRow": 4,
        "options": {
          "tooltip": {
            "mode": "multi"
          },
          "legend": {
            "displayMode": "list",
            "placement": "bottom"
          },
          "standardOptions": {
            "util": "none",
            "min": 0
          },
          "thresholds": {
            "steps": [
              {
                "color": "#73BF69",
                "value": null,
                "type": "base"
              },
              {
                "color": "#F2495C",
                "value": 80
              }
            ]
          }
        },
        "custom": {
          "drawStyle": "lines",
          "lineInterpolation": "linear",
          "spanNulls": false,
          "lineWidth": 1,
          "fillOpacity": 0.1,
          "gradientMode": "none",
          "stack": "off",
          "scaleDistribution": {
            "type": "linear"
          }
        }
      },
      {
        "type": "timeseries",
        "id": "d3a42a4a-864c-4431-adea-15dc911ba3da",
        "layout": {
          "h": 8,
          "w": 12,
          "x": 12,
          "y": 21,
          "i": "d3a42a4a-864c-4431-adea-15dc911ba3da",
          "isResizable": true
        },
        "version": "2.0.0",
        "datasourceCate": "prometheus",
        "targets": [
          {
            "refId": "A",
            "expr": "max(vm_request_duration_seconds{job=~\"$job\", instance=~\"$instance\", quantile=\"0.99\"}) by (path) > 0",
            "legend": "{{path}}"
          }
        ],
        "name": "Query duration 0.99 quantile ($instance)",
        "links": [],
        "description": "查询耗费时间越少越好：\n* ' * ' -不支持的查询路径 \n* ' /write ' -插入到虚拟机 \n* ' /metrics ' -查询虚拟机系统指标 \n* ' /query ' -查询即时值 \n* ' /query_range ' -查询时间范围 \n* ' /series ' -匹配某个标签集 \n* ' /label/{}/values ' -查询标签值列表(主要是变量)",
        "maxPerRow": 4,
        "options": {
          "tooltip": {
            "mode": "multi"
          },
          "legend": {
            "displayMode": "list",
            "placement": "bottom"
          },
          "standardOptions": {
            "util": "seconds",
            "min": 0
          },
          "thresholds": {
            "steps": [
              {
                "color": "#73BF69",
                "value": null,
                "type": "base"
              },
              {
                "color": "#F2495C",
                "value": 80
              }
            ]
          }
        },
        "custom": {
          "drawStyle": "lines",
          "lineInterpolation": "linear",
          "spanNulls": false,
          "lineWidth": 1,
          "fillOpacity": 0.1,
          "gradientMode": "none",
          "stack": "off",
          "scaleDistribution": {
            "type": "linear"
          }
        }
      },
      {
        "type": "timeseries",
        "id": "3f6f09a7-9d40-431f-8585-ab0fe9e27d3d",
        "layout": {
          "h": 8,
          "w": 12,
          "x": 0,
          "y": 29,
          "i": "3f6f09a7-9d40-431f-8585-ab0fe9e27d3d",
          "isResizable": true
        },
        "version": "2.0.0",
        "datasourceCate": "prometheus",
        "targets": [
          {
            "refId": "A",
            "expr": "sum(rate(vm_http_request_errors_total{job=~\"$job\", instance=~\"$instance\"}[5m])) by (job, path) > 0",
            "legend": "{{path}} ({{job}})"
          }
        ],
        "name": "Requests error rate ($instance)",
        "links": [],
        "description": "请求错误速率：\n* ' * ' -不支持的查询路径 \n* ' /write ' -插入到虚拟机 \n* ' /metrics ' -查询虚拟机系统指标 \n* ' /query ' -查询即时值 \n* ' /query_range ' -查询时间范围 \n* ' /series ' -匹配某个标签集 \n* ' /label/{}/values ' -查询标签值列表(主要是变量)",
        "maxPerRow": 4,
        "options": {
          "tooltip": {
            "mode": "multi"
          },
          "legend": {
            "displayMode": "list",
            "placement": "bottom"
          },
          "standardOptions": {
            "util": "none",
            "min": 0
          },
          "thresholds": {
            "steps": [
              {
                "color": "#73BF69",
                "value": null,
                "type": "base"
              },
              {
                "color": "#F2495C",
                "value": 80
              }
            ]
          }
        },
        "custom": {
          "drawStyle": "lines",
          "lineInterpolation": "linear",
          "spanNulls": false,
          "lineWidth": 1,
          "fillOpacity": 0.1,
          "gradientMode": "none",
          "stack": "off",
          "scaleDistribution": {
            "type": "linear"
          }
        }
      },
      {
        "type": "timeseries",
        "id": "4d5103a6-1c51-4d90-8a95-08b590e053e0",
        "layout": {
          "h": 8,
          "w": 12,
          "x": 12,
          "y": 29,
          "i": "4d5103a6-1c51-4d90-8a95-08b590e053e0",
          "isResizable": true
        },
        "version": "2.0.0",
        "datasourceCate": "prometheus",
        "targets": [
          {
            "refId": "A",
            "expr": "sum(rate(vm_log_messages_total{job=~\"$job\",instance=~\"$instance\", level!=\"info\"}[5m])) by (job, level) > 0",
            "legend": "{{job}} - {{level}}"
          }
        ],
        "name": "Logging rate",
        "links": [],
        "description": "按级别显示记录消息的速率。",
        "maxPerRow": 4,
        "options": {
          "tooltip": {
            "mode": "multi"
          },
          "legend": {
            "displayMode": "list",
            "placement": "bottom"
          },
          "standardOptions": {
            "util": "none",
            "min": 0
          },
          "thresholds": {
            "steps": [
              {
                "color": "#73BF69",
                "value": null,
                "type": "base"
              },
              {
                "color": "#F2495C",
                "value": 80
              }
            ]
          }
        },
        "custom": {
          "drawStyle": "lines",
          "lineInterpolation": "linear",
          "spanNulls": false,
          "lineWidth": 1,
          "fillOpacity": 1,
          "gradientMode": "none",
          "stack": "off",
          "scaleDistribution": {
            "type": "linear"
          }
        }
      },
      {
        "version": "2.0.0",
        "id": "75f79ba0-cd99-4aa0-903e-8a3432b7590e",
        "type": "row",
        "name": "Resource usage ($job)",
        "collapsed": true,
        "layout": {
          "h": 1,
          "w": 24,
          "x": 0,
          "y": 37,
          "i": "75f79ba0-cd99-4aa0-903e-8a3432b7590e",
          "isResizable": false
        },
        "panels": []
      },
      {
        "type": "timeseries",
        "id": "ed0f0389-99c0-4f49-9460-ce2027c85256",
        "layout": {
          "h": 8,
          "w": 12,
          "x": 0,
          "y": 38,
          "i": "ed0f0389-99c0-4f49-9460-ce2027c85256",
          "isResizable": true
        },
        "version": "2.0.0",
        "datasourceCate": "prometheus",
        "targets": [
          {
            "refId": "A",
            "expr": "max(\n    max_over_time(process_resident_memory_bytes{job=~\"$job\", instance=~\"$instance\"}[5m])\n    /\n    vm_available_memory_bytes{job=~\"$job\", instance=~\"$instance\"}\n) by(job)",
            "legend": "{{job}}"
          }
        ],
        "name": "RSS memory % usage ($instance)",
        "links": [],
        "description": "已用内存的百分比（常驻）。当内存使用率接近 100% 时，应用程序的性能将表示在下降。",
        "maxPerRow": 4,
        "options": {
          "tooltip": {
            "mode": "multi"
          },
          "legend": {
            "displayMode": "list",
            "placement": "bottom"
          },
          "standardOptions": {
            "util": "percentUnit",
            "min": 0
          },
          "thresholds": {
            "steps": [
              {
                "color": "#73BF69",
                "value": null,
                "type": "base"
              },
              {
                "color": "#F2495C",
                "value": 80
              }
            ]
          }
        },
        "custom": {
          "drawStyle": "lines",
          "lineInterpolation": "linear",
          "spanNulls": false,
          "lineWidth": 1,
          "fillOpacity": 0.5,
          "gradientMode": "none",
          "stack": "off",
          "scaleDistribution": {
            "type": "linear"
          }
        }
      },
      {
        "type": "timeseries",
        "id": "0d98c801-be38-4d9d-a2aa-e47895c6a9cb",
        "layout": {
          "h": 8,
          "w": 12,
          "x": 12,
          "y": 38,
          "i": "0d98c801-be38-4d9d-a2aa-e47895c6a9cb",
          "isResizable": true
        },
        "version": "2.0.0",
        "datasourceCate": "prometheus",
        "targets": [
          {
            "refId": "A",
            "expr": "max(\n    max_over_time(process_resident_memory_anon_bytes{job=~\"$job\", instance=~\"$instance\"}[5m])\n    /\n    vm_available_memory_bytes{job=~\"$job\", instance=~\"$instance\"}\n) by(job)",
            "legend": "{{job}}"
          }
        ],
        "name": "RSS anonymous memory % usage ($instance)",
        "links": [],
        "description": "共享进程本身分配的内存。当内存使用率达到100%时，有被OOM-killed.的风险。",
        "maxPerRow": 4,
        "options": {
          "tooltip": {
            "mode": "multi"
          },
          "legend": {
            "displayMode": "list",
            "placement": "bottom"
          },
          "standardOptions": {
            "util": "percentUnit",
            "min": 0
          },
          "thresholds": {
            "steps": [
              {
                "color": "#73BF69",
                "value": null,
                "type": "base"
              },
              {
                "color": "#F2495C",
                "value": 80
              }
            ]
          }
        },
        "custom": {
          "drawStyle": "lines",
          "lineInterpolation": "linear",
          "spanNulls": false,
          "lineWidth": 1,
          "fillOpacity": 0.5,
          "gradientMode": "none",
          "stack": "off",
          "scaleDistribution": {
            "type": "linear"
          }
        }
      },
      {
        "type": "timeseries",
        "id": "bb8b7ddc-fc10-4ee2-9d50-6d76209c22a1",
        "layout": {
          "h": 8,
          "w": 12,
          "x": 0,
          "y": 46,
          "i": "bb8b7ddc-fc10-4ee2-9d50-6d76209c22a1",
          "isResizable": true
        },
        "version": "2.0.0",
        "datasourceCate": "prometheus",
        "targets": [
          {
            "refId": "A",
            "expr": "max(\n    rate(process_cpu_seconds_total{job=~\"$job\", instance=~\"$instance\"}[5m])\n    /\n    vm_available_cpu_cores{job=~\"$job\", instance=~\"$instance\"}\n) by(job)",
            "legend": "{{job}}"
          }
        ],
        "name": "CPU ($instance)",
        "links": [],
        "description": "每个模块的CPU使用率",
        "maxPerRow": 4,
        "options": {
          "tooltip": {
            "mode": "multi"
          },
          "legend": {
            "displayMode": "list",
            "placement": "bottom"
          },
          "standardOptions": {
            "util": "percentUnit",
            "min": 0
          },
          "thresholds": {
            "steps": [
              {
                "color": "#73BF69",
                "value": null,
                "type": "base"
              },
              {
                "color": "#F2495C",
                "value": 80
              }
            ]
          }
        },
        "custom": {
          "drawStyle": "lines",
          "lineInterpolation": "linear",
          "spanNulls": false,
          "lineWidth": 1,
          "fillOpacity": 0.5,
          "gradientMode": "none",
          "stack": "off",
          "scaleDistribution": {
            "type": "linear"
          }
        }
      },
      {
        "type": "timeseries",
        "id": "758b1ac7-23dc-4540-a60b-19dc63712d4b",
        "layout": {
          "h": 8,
          "w": 12,
          "x": 12,
          "y": 46,
          "i": "758b1ac7-23dc-4540-a60b-19dc63712d4b",
          "isResizable": true
        },
        "version": "2.0.0",
        "datasourceCate": "prometheus",
        "targets": [
          {
            "refId": "A",
            "expr": "sum(rate(process_io_storage_read_bytes_total{job=~\"$job\", instance=~\"$instance\"}[5m])) by(job) > 0",
            "legend": "read {{job}}"
          },
          {
            "refId": "B",
            "expr": "sum(rate(process_io_storage_written_bytes_total{job=~\"$job\", instance=~\"$instance\"}[5m])) by(job) > 0",
            "legend": "write {{job}}"
          }
        ],
        "name": "Disk writes/reads ($instance)",
        "links": [],
        "description": "显示从存储磁盘读取/写入的字节数。",
        "maxPerRow": 4,
        "options": {
          "tooltip": {
            "mode": "multi"
          },
          "legend": {
            "displayMode": "list",
            "placement": "bottom"
          },
          "standardOptions": {
            "util": "bytesSI"
          },
          "thresholds": {
            "steps": [
              {
                "color": "#73BF69",
                "value": null,
                "type": "base"
              },
              {
                "color": "#F2495C",
                "value": 80
              }
            ]
          }
        },
        "custom": {
          "drawStyle": "lines",
          "lineInterpolation": "linear",
          "spanNulls": false,
          "lineWidth": 1,
          "fillOpacity": 0.5,
          "gradientMode": "none",
          "stack": "off",
          "scaleDistribution": {
            "type": "linear"
          }
        }
      },
      {
        "type": "timeseries",
        "id": "11bf58b2-3866-4861-b0f7-d97e30e5ded8",
        "layout": {
          "h": 8,
          "w": 12,
          "x": 0,
          "y": 54,
          "i": "11bf58b2-3866-4861-b0f7-d97e30e5ded8",
          "isResizable": true
        },
        "version": "2.0.0",
        "datasourceCate": "prometheus",
        "targets": [
          {
            "refId": "A",
            "expr": "max(\n    max_over_time(process_open_fds{job=~\"$job\", instance=~\"$instance\"}[5m])\n    /\n    process_max_fds{job=~\"$job\", instance=~\"$instance\"}\n) by(job)",
            "legend": "{{job}}"
          }
        ],
        "name": "Open FDs usage % ($instance)",
        "links": [],
        "description": "显示打开的文件描述符与操作系统中设置的限制的百分比。 \n达到打开文件的限制可能导致各种问题，提前做好告警配置。\n\n在这里查看如何调整限制： https://medium.com/@muhammadtriwibowo/set-permanently-ulimit-n-open-files-in-ubuntu-4d61064429a",
        "maxPerRow": 4,
        "options": {
          "tooltip": {
            "mode": "multi"
          },
          "legend": {
            "displayMode": "list",
            "placement": "bottom"
          },
          "standardOptions": {
            "util": "percentUnit",
            "min": 0,
            "decimals": 2
          },
          "thresholds": {
            "steps": [
              {
                "color": "#73BF69",
                "value": null,
                "type": "base"
              },
              {
                "color": "#F2495C",
                "value": 80
              }
            ]
          }
        },
        "custom": {
          "drawStyle": "lines",
          "lineInterpolation": "linear",
          "spanNulls": false,
          "lineWidth": 1,
          "fillOpacity": 0.5,
          "gradientMode": "none",
          "stack": "off",
          "scaleDistribution": {
            "type": "linear"
          }
        }
      },
      {
        "type": "timeseries",
        "id": "c3f34986-6a80-4a98-aff2-6bfb07b1c199",
        "layout": {
          "h": 8,
          "w": 12,
          "x": 12,
          "y": 54,
          "i": "c3f34986-6a80-4a98-aff2-6bfb07b1c199",
          "isResizable": true
        },
        "version": "2.0.0",
        "datasourceCate": "prometheus",
        "targets": [
          {
            "refId": "A",
            "expr": "sum(max_over_time(vm_tcplistener_conns{job=~\"$job\", instance=~\"$instance\"}[5m])) by(job)",
            "legend": "{{job}}"
          }
        ],
        "name": "TCP connections ($instance)",
        "links": [],
        "description": "5分钟内TCP连接最大数",
        "maxPerRow": 4,
        "options": {
          "tooltip": {
            "mode": "multi"
          },
          "legend": {
            "displayMode": "list",
            "placement": "bottom"
          },
          "standardOptions": {
            "util": "none"
          },
          "thresholds": {
            "steps": [
              {
                "color": "#73BF69",
                "value": null,
                "type": "base"
              },
              {
                "color": "#F2495C",
                "value": 80
              }
            ]
          }
        },
        "custom": {
          "drawStyle": "lines",
          "lineInterpolation": "linear",
          "spanNulls": false,
          "lineWidth": 1,
          "fillOpacity": 0.5,
          "gradientMode": "none",
          "stack": "off",
          "scaleDistribution": {
            "type": "linear"
          }
        }
      },
      {
        "type": "timeseries",
        "id": "ecf03c92-cf17-4f63-b1db-2e37e6170fc5",
        "layout": {
          "h": 8,
          "w": 12,
          "x": 0,
          "y": 62,
          "i": "ecf03c92-cf17-4f63-b1db-2e37e6170fc5",
          "isResizable": true
        },
        "version": "2.0.0",
        "datasourceCate": "prometheus",
        "targets": [
          {
            "refId": "A",
            "expr": "sum(max_over_time(go_goroutines{job=~\"$job\", instance=~\"$instance\"}[5m])) by(job)",
            "legend": "{{job}}"
          }
        ],
        "name": "Goroutines ($instance)",
        "links": [],
        "description": "5分钟内Goroutines最大数",
        "maxPerRow": 4,
        "options": {
          "tooltip": {
            "mode": "multi"
          },
          "legend": {
            "displayMode": "list",
            "placement": "bottom"
          },
          "standardOptions": {
            "util": "none",
            "min": 0,
            "decimals": 0
          },
          "thresholds": {
            "steps": [
              {
                "color": "#73BF69",
                "value": null,
                "type": "base"
              },
              {
                "color": "#F2495C",
                "value": 80
              }
            ]
          }
        },
        "custom": {
          "drawStyle": "lines",
          "lineInterpolation": "linear",
          "spanNulls": false,
          "lineWidth": 1,
          "fillOpacity": 0.5,
          "gradientMode": "none",
          "stack": "off",
          "scaleDistribution": {
            "type": "linear"
          }
        }
      },
      {
        "type": "timeseries",
        "id": "92132b50-f7a2-44b8-9fa0-059884b6875e",
        "layout": {
          "h": 8,
          "w": 12,
          "x": 12,
          "y": 62,
          "i": "92132b50-f7a2-44b8-9fa0-059884b6875e",
          "isResizable": true
        },
        "version": "2.0.0",
        "datasourceCate": "prometheus",
        "targets": [
          {
            "refId": "A",
            "expr": "sum(rate(vm_tcplistener_accepts_total{job=~\"$job\", instance=~\"$instance\"}[5m])) by(job)",
            "legend": "{{job}}"
          }
        ],
        "name": "TCP connections rate ($instance)",
        "links": [],
        "description": "TCP5分钟内监听的accepts速率",
        "maxPerRow": 4,
        "options": {
          "tooltip": {
            "mode": "multi"
          },
          "legend": {
            "displayMode": "list",
            "placement": "bottom"
          },
          "standardOptions": {
            "util": "none"
          },
          "thresholds": {
            "steps": [
              {
                "color": "#73BF69",
                "value": null,
                "type": "base"
              },
              {
                "color": "#F2495C",
                "value": 80
              }
            ]
          }
        },
        "custom": {
          "drawStyle": "lines",
          "lineInterpolation": "linear",
          "spanNulls": false,
          "lineWidth": 1,
          "fillOpacity": 0.5,
          "gradientMode": "none",
          "stack": "off",
          "scaleDistribution": {
            "type": "linear"
          }
        }
      },
      {
        "type": "timeseries",
        "id": "11a12db0-c519-4c12-a26c-458436262cc3",
        "layout": {
          "h": 8,
          "w": 12,
          "x": 0,
          "y": 70,
          "i": "11a12db0-c519-4c12-a26c-458436262cc3",
          "isResizable": true
        },
        "version": "2.0.0",
        "datasourceCate": "prometheus",
        "targets": [
          {
            "refId": "A",
            "expr": "sum(max_over_time(process_num_threads{job=~\"$job\", instance=~\"$instance\"}[5m])) by(job)",
            "legend": "{{job}}"
          }
        ],
        "name": "Threads ($instance)",
        "links": [],
        "description": "5分钟最大线程数",
        "maxPerRow": 4,
        "options": {
          "tooltip": {
            "mode": "multi"
          },
          "legend": {
            "displayMode": "list",
            "placement": "bottom"
          },
          "standardOptions": {
            "util": "none",
            "min": 0,
            "decimals": 0
          },
          "thresholds": {
            "steps": [
              {
                "color": "#73BF69",
                "value": null,
                "type": "base"
              },
              {
                "color": "#F2495C",
                "value": 80
              }
            ]
          }
        },
        "custom": {
          "drawStyle": "lines",
          "lineInterpolation": "linear",
          "spanNulls": false,
          "lineWidth": 1,
          "fillOpacity": 0.5,
          "gradientMode": "none",
          "stack": "off",
          "scaleDistribution": {
            "type": "linear"
          }
        }
      },
      {
        "version": "2.0.0",
        "id": "5d9e60b8-4efd-4d16-b429-f3670ebf0cd8",
        "type": "row",
        "name": "Troubleshooting",
        "collapsed": true,
        "layout": {
          "h": 1,
          "w": 24,
          "x": 0,
          "y": 78,
          "i": "5d9e60b8-4efd-4d16-b429-f3670ebf0cd8",
          "isResizable": false
        },
        "panels": []
      },
      {
        "type": "timeseries",
        "id": "f416e311-611c-4414-8176-59b5b7e224d0",
        "layout": {
          "h": 8,
          "w": 12,
          "x": 0,
          "y": 79,
          "i": "f416e311-611c-4414-8176-59b5b7e224d0",
          "isResizable": true
        },
        "version": "2.0.0",
        "datasourceCate": "prometheus",
        "targets": [
          {
            "refId": "A",
            "expr": "sum(rate(vm_new_timeseries_created_total{job=~\"$storage\", instance=~\"$instance\"}[5m]))",
            "legend": "churn rate"
          },
          {
            "refId": "B",
            "expr": "sum(increase(vm_new_timeseries_created_total{job=~\"$storage\", instance=~\"$instance\"}[24h]))",
            "legend": "new series over 24h"
          }
        ],
        "name": "Churn rate ($instance)",
        "links": [],
        "description": "显示过去 24 小时内创建的新系列的比率和总数。\n\n高Churn率与数据库性能密切相关，可能会导致意外的 OOM 或缓慢的查询。建议始终关注此指标以避免意外的基数“爆炸”。\n\nChurn率越高，处理它所需的资源就越多。考虑保持尽可能低的流失率。\n\n要调查有关最核心TSDB的统计信息，请使用 api/v1/status/tsdb 处理程序。\n详情： https://docs.victoriametrics.com/Cluster-VictoriaMetrics.html#url-format\n\n推荐阅读:\n* https://www.robustperception.io/cardinality-is-key\n* https://valyala.medium.com/high-cardinality-tsdb-benchmarks-victoriametrics-vs-timescaledb-vs-influxdb-13e6ee64dd6b",
        "maxPerRow": 4,
        "options": {
          "tooltip": {
            "mode": "multi"
          },
          "legend": {
            "displayMode": "list",
            "placement": "bottom"
          },
          "standardOptions": {
            "util": "none",
            "min": 0
          },
          "thresholds": {
            "steps": [
              {
                "color": "#73BF69",
                "value": null,
                "type": "base"
              },
              {
                "color": "#F2495C",
                "value": 80
              }
            ]
          }
        },
        "custom": {
          "drawStyle": "lines",
          "lineInterpolation": "linear",
          "spanNulls": false,
          "lineWidth": 1,
          "fillOpacity": 0.5,
          "gradientMode": "none",
          "stack": "off",
          "scaleDistribution": {
            "type": "linear"
          }
        }
      },
      {
        "type": "timeseries",
        "id": "8d8fa792-0d30-4204-b518-91ab5eed2c8c",
        "layout": {
          "h": 8,
          "w": 12,
          "x": 12,
          "y": 79,
          "i": "8d8fa792-0d30-4204-b518-91ab5eed2c8c",
          "isResizable": true
        },
        "version": "2.0.0",
        "datasourceCate": "prometheus",
        "targets": [
          {
            "refId": "A",
            "expr": "max(\n    rate(vm_slow_row_inserts_total{job=~\"$storage\"}[5m]) \n    / rate(vm_rows_added_to_storage_total{job=~\"$storage\"}[5m])\n)",
            "legend": "slow inserts"
          }
        ],
        "name": "Slow inserts",
        "links": [],
        "description": "过去 5 分钟内慢速插入占总插入率的百分比。\n\n值越小越好。如果在较长时间内百分比仍然很高 (>10%)，则可能需要更多 RAM 来优化处理当前数量的活动时间序列。\n\n一般来说，VictoriaMetrics 每个活动时间序列需要 ~1KB 或 RAM，因此根据容量规划文档计算当前工作负载所需的 RAM 量应该很容易。但结果数字可能与实际数字相去甚远，因为所需的内存量取决于其他因素，例如每个时间序列的标签数量和标签值的长度。",
        "maxPerRow": 4,
        "options": {
          "tooltip": {
            "mode": "multi"
          },
          "legend": {
            "displayMode": "list",
            "placement": "bottom"
          },
          "standardOptions": {
            "util": "percentUnit",
            "min": 0
          },
          "thresholds": {
            "steps": [
              {
                "color": "transparent",
                "value": null,
                "type": "base"
              },
              {
                "color": "#F2495C",
                "value": 0.1
              }
            ]
          }
        },
        "custom": {
          "drawStyle": "lines",
          "lineInterpolation": "linear",
          "spanNulls": false,
          "lineWidth": 1,
          "fillOpacity": 0.1,
          "gradientMode": "none",
          "stack": "off",
          "scaleDistribution": {
            "type": "linear"
          }
        }
      },
      {
        "type": "timeseries",
        "id": "b02351fa-01af-41da-bdad-c031c8880798",
        "layout": {
          "h": 8,
          "w": 12,
          "x": 0,
          "y": 87,
          "i": "b02351fa-01af-41da-bdad-c031c8880798",
          "isResizable": true
        },
        "version": "2.0.0",
        "datasourceCate": "prometheus",
        "targets": [
          {
            "refId": "A",
            "expr": "sum(vm_rpc_vmstorage_is_read_only{job=~\"$insert\", instance=~\"$instance\"}) by(instance, addr) > 0",
            "legend": "{{instance}} => {{addr}}"
          }
        ],
        "name": "Storage in readonly status for vminsert ($instance)",
        "links": [],
        "description": "当指定addr位置的vmstorage向指定vminsert节点通信，表示当前处于只读模式，无法接受新数据时，该值大于0",
        "maxPerRow": 4,
        "options": {
          "tooltip": {
            "mode": "multi"
          },
          "legend": {
            "displayMode": "list",
            "placement": "bottom"
          },
          "standardOptions": {
            "util": "none",
            "min": 0
          },
          "thresholds": {
            "steps": [
              {
                "color": "#73BF69",
                "value": null,
                "type": "base"
              },
              {
                "color": "#F2495C",
                "value": 80
              }
            ]
          }
        },
        "custom": {
          "drawStyle": "lines",
          "lineInterpolation": "linear",
          "spanNulls": false,
          "lineWidth": 1,
          "fillOpacity": 0.1,
          "gradientMode": "none",
          "stack": "off",
          "scaleDistribution": {
            "type": "linear"
          }
        }
      },
      {
        "type": "timeseries",
        "id": "55f7842d-b27c-4cbe-b294-fb4dee1d9c40",
        "layout": {
          "h": 8,
          "w": 12,
          "x": 12,
          "y": 87,
          "i": "55f7842d-b27c-4cbe-b294-fb4dee1d9c40",
          "isResizable": true
        },
        "version": "2.0.0",
        "datasourceCate": "prometheus",
        "targets": [
          {
            "refId": "A",
            "expr": "sum(rate(vm_slow_queries_total{job=~\"$select\", instance=~\"$instance\"}[5m]))",
            "legend": "slow queries rate"
          }
        ],
        "name": "Slow queries rate ($instance)",
        "links": [],
        "description": "根据 search.logSlowQueryDuration 标志进行慢查询，默认为 5s。",
        "maxPerRow": 4,
        "options": {
          "tooltip": {
            "mode": "multi"
          },
          "legend": {
            "displayMode": "list",
            "placement": "bottom"
          },
          "standardOptions": {
            "util": "none",
            "min": 0
          },
          "thresholds": {
            "steps": [
              {
                "color": "#73BF69",
                "value": null,
                "type": "base"
              },
              {
                "color": "#F2495C",
                "value": 80
              }
            ]
          }
        },
        "custom": {
          "drawStyle": "lines",
          "lineInterpolation": "linear",
          "spanNulls": false,
          "lineWidth": 1,
          "fillOpacity": 0.1,
          "gradientMode": "none",
          "stack": "off",
          "scaleDistribution": {
            "type": "linear"
          }
        }
      },
      {
        "type": "timeseries",
        "id": "719dacf7-1352-40d5-a3fb-131cf2838afd",
        "layout": {
          "h": 8,
          "w": 12,
          "x": 0,
          "y": 95,
          "i": "719dacf7-1352-40d5-a3fb-131cf2838afd",
          "isResizable": true
        },
        "version": "2.0.0",
        "datasourceCate": "prometheus",
        "targets": [
          {
            "refId": "A",
            "expr": "sum(increase(vm_assisted_merges_total{job=~\"$storage\", instance=~\"$instance\"}[5m])) by(type) > 0",
            "legend": "__auto"
          }
        ],
        "name": "Assisted merges ($instance)",
        "links": [],
        "description": "当 vmstorage 跟不上合并部件时，合并辅助就会发生。这通常是 vmstorage 过载的状况。",
        "maxPerRow": 4,
        "options": {
          "tooltip": {
            "mode": "multi"
          },
          "legend": {
            "displayMode": "list",
            "placement": "bottom"
          },
          "standardOptions": {
            "util": "none",
            "min": 0
          },
          "thresholds": {
            "steps": [
              {
                "color": "#73BF69",
                "value": null,
                "type": "base"
              },
              {
                "color": "#F2495C",
                "value": 80
              }
            ]
          }
        },
        "custom": {
          "drawStyle": "lines",
          "lineInterpolation": "linear",
          "spanNulls": false,
          "lineWidth": 1,
          "fillOpacity": 1,
          "gradientMode": "none",
          "stack": "off",
          "scaleDistribution": {
            "type": "linear"
          }
        }
      },
      {
        "type": "timeseries",
        "id": "14737fe6-c582-48bc-b4a5-cc4e09df728f",
        "layout": {
          "h": 8,
          "w": 12,
          "x": 12,
          "y": 95,
          "i": "14737fe6-c582-48bc-b4a5-cc4e09df728f",
          "isResizable": true
        },
        "version": "2.0.0",
        "datasourceCate": "prometheus",
        "targets": [
          {
            "refId": "A",
            "expr": "sum(increase(vm_metrics_with_dropped_labels_total{job=~\"$insert\", instance=~\"$instance\"}[5m]))",
            "legend": "metrics with dropped labels"
          }
        ],
        "name": "Labels limit exceeded ($instance)",
        "links": [],
        "description": "VictoriaMetrics 使用 -maxLabelsPerTimeseries 命令行标志限制每个指标的标签数量。\n\n这可以防止抓取带有过多标签的指标。必须根据您的工作负载调整 maxLabelsPerTimeseries 的值。\n\n当超出限制时（图表 > 0）- 多余的标签将被丢弃，这可能会导致意外的相同时间序列。",
        "maxPerRow": 4,
        "options": {
          "tooltip": {
            "mode": "multi"
          },
          "legend": {
            "displayMode": "list",
            "placement": "bottom"
          },
          "standardOptions": {
            "util": "none",
            "min": 0,
            "decimals": 2
          },
          "thresholds": {
            "steps": [
              {
                "color": "#73BF69",
                "value": null,
                "type": "base"
              },
              {
                "color": "#F2495C",
                "value": 80
              }
            ]
          }
        },
        "custom": {
          "drawStyle": "lines",
          "lineInterpolation": "linear",
          "spanNulls": false,
          "lineWidth": 1,
          "fillOpacity": 0.1,
          "gradientMode": "none",
          "stack": "off",
          "scaleDistribution": {
            "type": "linear"
          }
        }
      },
      {
        "type": "timeseries",
        "id": "24816924-fd34-4d5d-8806-30d129937bfe",
        "layout": {
          "h": 9,
          "w": 12,
          "x": 0,
          "y": 103,
          "i": "24816924-fd34-4d5d-8806-30d129937bfe",
          "isResizable": true
        },
        "version": "2.0.0",
        "datasourceCate": "prometheus",
        "targets": [
          {
            "refId": "A",
            "expr": "max(\n    vm_cache_size_bytes{job=~\"$storage\", instance=~\"$instance\"} \n    /\n    vm_cache_size_max_bytes{job=~\"$job\", instance=~\"$instance\"}\n) by(type)",
            "legend": "{{type}}"
          }
        ],
        "name": "Cache usage % by type ($instance)",
        "links": [],
        "description": "\n按类型显示已用缓存大小与允许大小的百分比。\n接近 100% 的值表示最大的潜在利用率。\n接近 0% 的值表明缓存未得到充分利用。",
        "maxPerRow": 4,
        "options": {
          "tooltip": {
            "mode": "multi"
          },
          "legend": {
            "displayMode": "list",
            "placement": "bottom"
          },
          "standardOptions": {
            "util": "percentUnit"
          },
          "thresholds": {
            "steps": [
              {
                "color": "#73BF69",
                "value": null,
                "type": "base"
              },
              {
                "color": "#F2495C",
                "value": 80
              }
            ]
          }
        },
        "custom": {
          "drawStyle": "lines",
          "lineInterpolation": "linear",
          "spanNulls": false,
          "lineWidth": 1,
          "fillOpacity": 0.5,
          "gradientMode": "none",
          "stack": "off",
          "scaleDistribution": {
            "type": "linear"
          }
        }
      },
      {
        "type": "timeseries",
        "id": "549d18f7-715c-445a-8291-d4e43aa6b099",
        "layout": {
          "h": 9,
          "w": 12,
          "x": 12,
          "y": 103,
          "i": "549d18f7-715c-445a-8291-d4e43aa6b099",
          "isResizable": true
        },
        "version": "2.0.0",
        "datasourceCate": "prometheus",
        "targets": [
          {
            "refId": "A",
            "expr": "max(\n    rate(vm_cache_misses_total{job=~\"$job\", instance=~\"$instance\"}[5m])\n    /\n    rate(vm_cache_requests_total{job=~\"$job\", instance=~\"$instance\"}[5m])\n) by(type)",
            "legend": "{{type}}"
          }
        ],
        "name": "Cache miss ratio ($instance)",
        "links": [],
        "description": "显示缓存丢失率，越低越好；",
        "maxPerRow": 4,
        "options": {
          "tooltip": {
            "mode": "multi"
          },
          "legend": {
            "displayMode": "list",
            "placement": "bottom"
          },
          "standardOptions": {
            "util": "percentUnit",
            "min": 0,
            "max": 1
          },
          "thresholds": {
            "steps": [
              {
                "color": "#73BF69",
                "value": null,
                "type": "base"
              },
              {
                "color": "#F2495C",
                "value": 80
              }
            ]
          }
        },
        "custom": {
          "drawStyle": "lines",
          "lineInterpolation": "linear",
          "spanNulls": false,
          "lineWidth": 1,
          "fillOpacity": 0.5,
          "gradientMode": "none",
          "stack": "off",
          "scaleDistribution": {
            "type": "linear"
          }
        }
      },
      {
        "type": "table",
        "id": "a9e81e32-ad2b-487d-adae-3ee852bbc7b5",
        "layout": {
          "h": 7,
          "w": 24,
          "x": 0,
          "y": 112,
          "i": "a9e81e32-ad2b-487d-adae-3ee852bbc7b5",
          "isResizable": true
        },
        "version": "2.0.0",
        "datasourceCate": "prometheus",
        "targets": [
          {
            "refId": "A",
            "expr": "sum(flag{is_set=\"true\", job=~\"$job\", instance=~\"$instance\"}) by(job, instance, name, value)",
            "legend": "{{job}} --> {{name}} --> {{value}}"
          }
        ],
        "name": "Non-default flags",
        "links": [],
        "maxPerRow": 4,
        "custom": {
          "showHeader": true,
          "colorMode": "value",
          "calc": "lastNotNull",
          "displayMode": "seriesToRows"
        },
        "options": {
          "standardOptions": {}
        },
        "overrides": [
          {}
        ]
      },
      {
        "version": "2.0.0",
        "id": "af7aae38-80a1-45cb-8fbc-f5ae6557cf9f",
        "type": "row",
        "name": "Interconnection ($job)",
        "collapsed": false,
        "layout": {
          "h": 1,
          "w": 24,
          "x": 0,
          "y": 119,
          "i": "af7aae38-80a1-45cb-8fbc-f5ae6557cf9f",
          "isResizable": false
        },
        "panels": [
          {
            "version": "2.0.0",
            "id": "78eca416-f3f2-459d-8a9f-50427f1ac9fb",
            "type": "timeseries",
            "name": "Rows ($instance)",
            "description": "Shows number of pushed and sent rows. \n* `Pushed rows` - rows added to internal inserter buffers before send\n* `Sent rows` - successfully transmitted rows to storage nodes\n\nPlease note, it could be that `Sent > Pushed` because of the replication factor.",
            "links": [],
            "layout": {
              "h": 9,
              "w": 12,
              "x": 0,
              "y": 21,
              "i": "78eca416-f3f2-459d-8a9f-50427f1ac9fb"
            },
            "targets": [
              {
                "refId": "B",
                "expr": "sum(rate(vm_rpc_rows_pushed_total{job=~\"$job\",instance=~\"$instance\"}[5m]))",
                "legend": "Pushed"
              },
              {
                "refId": "E",
                "expr": "sum(rate(vm_rpc_rows_sent_total{job=~\"$job\",instance=~\"$instance\"}[5m]))",
                "legend": "Sent"
              }
            ],
            "options": {
              "valueMappings": [],
              "thresholds": {
                "mode": "absolute",
                "style": "off",
                "steps": [
                  {
                    "color": "#73BF69"
                  },
                  {
                    "color": "#F2495C",
                    "value": 80
                  }
                ]
              },
              "standardOptions": {
                "util": "none",
                "min": 0
              },
              "legend": {
                "displayMode": "list",
                "placement": "bottom"
              },
              "tooltip": {
                "mode": "multi"
              }
            },
            "custom": {
              "version": "2.0.0",
              "drawStyle": "lines",
              "lineInterpolation": "linear",
              "fillOpacity": 0.5,
              "stack": "off"
            },
            "maxPerRow": 4
          },
          {
            "version": "2.0.0",
            "id": "ae7d8087-3715-44a1-80a0-4b23795e2274",
            "type": "timeseries",
            "name": "RPC errors ($instance)",
            "description": "Rate of RPC errors by type:\n* `Connection` - the number of connection errors to vmstorage node\n* `Dial` -  the number of dial errors to vmstorage node.\n* `Handshake` - the number of handshake errors to vmstorage node\n* `Rerouted` - errors appeared during rerouting of rows from un-healthy storage node to a healthy one.",
            "links": [],
            "layout": {
              "h": 9,
              "w": 12,
              "x": 12,
              "y": 21,
              "i": "ae7d8087-3715-44a1-80a0-4b23795e2274"
            },
            "targets": [
              {
                "refId": "A",
                "expr": "sum(rate(vm_rpc_connection_errors_total{job=~\"$job\",instance=~\"$instance\"}[5m]))",
                "legend": "Connection"
              },
              {
                "refId": "B",
                "expr": "sum(rate(vm_rpc_dial_errors_total{job=~\"$job\",instance=~\"$instance\"}[5m]))",
                "legend": "Dial"
              },
              {
                "refId": "E",
                "expr": "sum(rate(vm_rpc_handshake_errors_total{job=~\"$job\",instance=~\"$instance\"}[5m]))",
                "legend": "Handshake"
              }
            ],
            "options": {
              "valueMappings": [],
              "thresholds": {
                "mode": "absolute",
                "style": "off",
                "steps": [
                  {
                    "color": "#73BF69"
                  },
                  {
                    "color": "#F2495C",
                    "value": 80
                  }
                ]
              },
              "standardOptions": {
                "util": "none",
                "min": 0
              },
              "legend": {
                "displayMode": "list",
                "placement": "bottom"
              },
              "tooltip": {
                "mode": "multi"
              }
            },
            "custom": {
              "version": "2.0.0",
              "drawStyle": "lines",
              "lineInterpolation": "linear",
              "fillOpacity": 0.5,
              "stack": "off"
            },
            "maxPerRow": 4
          },
          {
            "version": "2.0.0",
            "id": "f7831239-6ba7-4509-afe6-f0850d4e2df7",
            "type": "timeseries",
            "name": "Rows ($instance) rerouted to ",
            "description": "The number of rows rerouted to the vmstorage node from other nodes when they were unhealthy.",
            "links": [],
            "layout": {
              "h": 8,
              "w": 12,
              "x": 0,
              "y": 30,
              "i": "f7831239-6ba7-4509-afe6-f0850d4e2df7"
            },
            "targets": [
              {
                "refId": "A",
                "expr": "sum(rate(vm_rpc_rows_rerouted_to_here_total{job=~\"$job\", instance=~\"$instance\"}[5m])) by(addr) > 0",
                "legend": "__auto"
              }
            ],
            "options": {
              "valueMappings": [],
              "thresholds": {
                "mode": "absolute",
                "style": "off",
                "steps": [
                  {
                    "color": "#73BF69"
                  },
                  {
                    "color": "#F2495C",
                    "value": 80
                  }
                ]
              },
              "standardOptions": {
                "util": "none",
                "min": 0
              },
              "legend": {
                "displayMode": "list",
                "placement": "bottom"
              },
              "tooltip": {
                "mode": "multi"
              }
            },
            "custom": {
              "version": "2.0.0",
              "drawStyle": "lines",
              "lineInterpolation": "linear",
              "fillOpacity": 0.5,
              "stack": "off"
            },
            "maxPerRow": 4
          },
          {
            "version": "2.0.0",
            "id": "5b11b5b8-9f45-4a83-80df-b0a5c285a4d3",
            "type": "timeseries",
            "name": "Rows ($instance) rerouted from",
            "description": "The number of rows rerouted from the vmstorage node to healthy nodes when the given node was unhealthy.",
            "links": [],
            "layout": {
              "h": 8,
              "w": 12,
              "x": 12,
              "y": 30,
              "i": "5b11b5b8-9f45-4a83-80df-b0a5c285a4d3"
            },
            "targets": [
              {
                "refId": "A",
                "expr": "sum(rate(vm_rpc_rows_rerouted_from_here_total{job=~\"$job\", instance=~\"$instance\"}[5m])) by(addr) > 0",
                "legend": "{{addr}}"
              }
            ],
            "options": {
              "valueMappings": [],
              "thresholds": {
                "mode": "absolute",
                "style": "off",
                "steps": [
                  {
                    "color": "#73BF69"
                  },
                  {
                    "color": "#F2495C",
                    "value": 80
                  }
                ]
              },
              "standardOptions": {
                "util": "none",
                "min": 0
              },
              "legend": {
                "displayMode": "list",
                "placement": "bottom"
              },
              "tooltip": {
                "mode": "multi"
              }
            },
            "custom": {
              "version": "2.0.0",
              "drawStyle": "lines",
              "lineInterpolation": "linear",
              "fillOpacity": 0.5,
              "stack": "off"
            },
            "maxPerRow": 4
          },
          {
            "version": "2.0.0",
            "id": "e8f68356-4bb3-46b5-b79d-d4de25ef16d2",
            "type": "timeseries",
            "name": "Pending",
            "description": "The number of rows or bytes that vminesrt internal buffer contains at the moment.",
            "links": [],
            "layout": {
              "h": 8,
              "w": 12,
              "x": 0,
              "y": 38,
              "i": "e8f68356-4bb3-46b5-b79d-d4de25ef16d2"
            },
            "targets": [
              {
                "refId": "A",
                "expr": "sum(vm_rpc_buf_pending_bytes{job=~\"$job\", instance=~\"$instance\"})",
                "legend": "bytes"
              },
              {
                "refId": "B",
                "expr": "sum(vm_rpc_rows_pending{job=~\"$job\", instance=~\"$instance\"})",
                "legend": "rows"
              }
            ],
            "options": {
              "valueMappings": [],
              "thresholds": {
                "mode": "absolute",
                "style": "off",
                "steps": [
                  {
                    "color": "#73BF69"
                  },
                  {
                    "color": "#F2495C",
                    "value": 80
                  }
                ]
              },
              "standardOptions": {
                "util": "none",
                "min": 0
              },
              "legend": {
                "displayMode": "list",
                "placement": "bottom"
              },
              "tooltip": {
                "mode": "multi"
              }
            },
            "custom": {
              "version": "2.0.0",
              "drawStyle": "lines",
              "lineInterpolation": "linear",
              "fillOpacity": 0.5,
              "stack": "off"
            },
            "maxPerRow": 4
          },
          {
            "version": "2.0.0",
            "id": "0f34fea5-4a9c-411f-8659-853a0e85a350",
            "type": "timeseries",
            "name": "RPC network usage ($instance)",
            "description": "Network usage by internal VictoriaMetrics RPC protocol",
            "links": [],
            "layout": {
              "h": 8,
              "w": 12,
              "x": 12,
              "y": 38,
              "i": "0f34fea5-4a9c-411f-8659-853a0e85a350"
            },
            "targets": [
              {
                "refId": "A",
                "expr": "sum(rate(vm_tcpdialer_written_bytes_total{job=~\"$job\", instance=~\"$instance\"}[5m])) * 8",
                "legend": "network usage"
              }
            ],
            "options": {
              "valueMappings": [],
              "thresholds": {
                "mode": "absolute",
                "style": "off",
                "steps": [
                  {
                    "color": "#73BF69"
                  },
                  {
                    "color": "#F2495C",
                    "value": 80
                  }
                ]
              },
              "standardOptions": {
                "util": "none",
                "min": 0
              },
              "legend": {
                "displayMode": "list",
                "placement": "bottom"
              },
              "tooltip": {
                "mode": "multi"
              }
            },
            "custom": {
              "version": "2.0.0",
              "drawStyle": "lines",
              "lineInterpolation": "linear",
              "fillOpacity": 0.1,
              "stack": "off"
            },
            "maxPerRow": 4
          }
        ]
      },
      {
        "version": "2.0.0",
        "id": "a9237812-bf90-4c00-9a26-4ce8a6ab41cd",
        "type": "row",
        "name": "vmstorage ($instance)",
        "collapsed": true,
        "layout": {
          "h": 1,
          "w": 24,
          "x": 0,
          "y": 120,
          "i": "a9237812-bf90-4c00-9a26-4ce8a6ab41cd",
          "isResizable": false
        },
        "panels": []
      },
      {
        "type": "timeseries",
        "id": "70a7c7b6-fc79-4154-8540-b85c00bf3f19",
        "layout": {
          "h": 8,
          "w": 12,
          "x": 0,
          "y": 121,
          "i": "70a7c7b6-fc79-4154-8540-b85c00bf3f19",
          "isResizable": true
        },
        "version": "2.0.0",
        "datasourceCate": "prometheus",
        "targets": [
          {
            "refId": "A",
            "expr": "sum(rate(vm_vminsert_metrics_read_total{job=~\"$storage\", instance=~\"$instance\"}[5m])) ",
            "legend": "ingestion rate"
          }
        ],
        "name": "Ingestion rate ($instance)",
        "links": [],
        "description": "显示每秒输入存储节点的数据点数。这个指标不会显示所有存储的数据点，因为其中一些数据点可能会因为错误的时间戳或解码错误而被丢弃。",
        "maxPerRow": 4,
        "options": {
          "tooltip": {
            "mode": "multi"
          },
          "legend": {
            "displayMode": "list",
            "placement": "bottom"
          },
          "standardOptions": {
            "util": "none",
            "min": 0
          },
          "thresholds": {
            "steps": [
              {
                "color": "#73BF69",
                "value": null,
                "type": "base"
              },
              {
                "color": "#F2495C",
                "value": 80
              }
            ]
          }
        },
        "custom": {
          "drawStyle": "lines",
          "lineInterpolation": "linear",
          "spanNulls": false,
          "lineWidth": 1,
          "fillOpacity": 0.1,
          "gradientMode": "none",
          "stack": "normal",
          "scaleDistribution": {
            "type": "linear"
          }
        }
      },
      {
        "type": "timeseries",
        "id": "303e6719-7d0e-4dbc-a063-dc2e6adb15b8",
        "layout": {
          "h": 8,
          "w": 12,
          "x": 12,
          "y": 121,
          "i": "303e6719-7d0e-4dbc-a063-dc2e6adb15b8",
          "isResizable": true
        },
        "version": "2.0.0",
        "datasourceCate": "prometheus",
        "targets": [
          {
            "refId": "A",
            "expr": "min(vm_free_disk_space_bytes{job=~\"$storage\", instance=~\"$instance\"} \n/ \nignoring(path) (\n    (\n        rate(vm_rows_added_to_storage_total{job=~\"$storage\", instance=~\"$instance\"}[1d])\n        - \n        ignoring(type) rate(vm_deduplicated_samples_total{job=~\"$storage\", instance=~\"$instance\", type=\"merge\"}[1d])\n    ) * scalar(\n            sum(vm_data_size_bytes{job=~\"$storage\", instance=~\"$instance\", type!~\"indexdb.*\"})\n            / \n            sum(vm_rows{job=~\"$storage\", instance=~\"$instance\", type!~\"indexdb.*\"})\n            )\n))",
            "legend": "min ETA"
          }
        ],
        "name": "Storage full ETA ($instance)",
        "links": [],
        "description": "根据以下参数，显示至少一个vmstorage节点的磁盘容量达到100%所需的大约时间: \n\n可用磁盘空间; \n\n排摄食率; \n\ndedup率; \n\n压缩。 \n\n使用此面板进行容量规划，以便估计耗尽磁盘空间所需的剩余时间。",
        "maxPerRow": 4,
        "options": {
          "tooltip": {
            "mode": "multi"
          },
          "legend": {
            "displayMode": "list",
            "placement": "bottom"
          },
          "standardOptions": {
            "util": "bytesIEC",
            "min": 0
          },
          "thresholds": {
            "steps": [
              {
                "color": "#73BF69",
                "value": null,
                "type": "base"
              },
              {
                "color": "#F2495C",
                "value": 80
              }
            ]
          }
        },
        "custom": {
          "drawStyle": "lines",
          "lineInterpolation": "linear",
          "spanNulls": false,
          "lineWidth": 1,
          "fillOpacity": 0.5,
          "gradientMode": "none",
          "stack": "off",
          "scaleDistribution": {
            "type": "linear"
          }
        }
      },
      {
        "type": "timeseries",
        "id": "6435eb33-8527-4f99-830b-298718893375",
        "layout": {
          "h": 7,
          "w": 12,
          "x": 0,
          "y": 129,
          "i": "6435eb33-8527-4f99-830b-298718893375",
          "isResizable": true
        },
        "version": "2.0.0",
        "datasourceCate": "prometheus",
        "targets": [
          {
            "refId": "A",
            "expr": "max(\n    rate(process_cpu_seconds_total{job=~\"$storage\", instance=~\"$instance\"}[5m])\n    /\n    process_cpu_cores_available{job=~\"$storage\", instance=~\"$instance\"}\n)",
            "legend": "max"
          },
          {
            "refId": "B",
            "expr": "min(\n    rate(process_cpu_seconds_total{job=~\"$storage\", instance=~\"$instance\"}[5m])\n    /\n    process_cpu_cores_available{job=~\"$storage\", instance=~\"$instance\"}\n)",
            "legend": "min"
          },
          {
            "refId": "C",
            "expr": "avg(\n    rate(process_cpu_seconds_total{job=~\"$storage\", instance=~\"$instance\"}[5m])\n    /\n    process_cpu_cores_available{job=~\"$storage\", instance=~\"$instance\"}\n)",
            "legend": "avg"
          }
        ],
        "name": "CPU usage % ($instance)",
        "links": [],
        "description": "storage组件CPU使用率",
        "maxPerRow": 4,
        "options": {
          "tooltip": {
            "mode": "multi"
          },
          "legend": {
            "displayMode": "list",
            "placement": "bottom"
          },
          "standardOptions": {
            "util": "percentUnit",
            "min": 0
          },
          "thresholds": {
            "steps": [
              {
                "color": "#73BF69",
                "value": null,
                "type": "base"
              },
              {
                "color": "#F2495C",
                "value": 0.9
              }
            ]
          }
        },
        "custom": {
          "drawStyle": "lines",
          "lineInterpolation": "linear",
          "spanNulls": false,
          "lineWidth": 1,
          "fillOpacity": 0.5,
          "gradientMode": "none",
          "stack": "off",
          "scaleDistribution": {
            "type": "linear"
          }
        }
      },
      {
        "type": "timeseries",
        "id": "ab3bf331-6dde-4eff-b89b-29432c02f466",
        "layout": {
          "h": 7,
          "w": 12,
          "x": 12,
          "y": 129,
          "i": "ab3bf331-6dde-4eff-b89b-29432c02f466",
          "isResizable": true
        },
        "version": "2.0.0",
        "datasourceCate": "prometheus",
        "targets": [
          {
            "refId": "A",
            "expr": "max(\n    max_over_time(process_resident_memory_bytes{job=~\"$storage\", instance=~\"$instance\"}[5m])\n    /\n    vm_available_memory_bytes{job=~\"$storage\", instance=~\"$instance\"}\n)",
            "legend": "max"
          },
          {
            "refId": "B",
            "expr": "min(\n    max_over_time(process_resident_memory_bytes{job=~\"$storage\", instance=~\"$instance\"}[5m])\n    /\n    vm_available_memory_bytes{job=~\"$storage\", instance=~\"$instance\"}\n)",
            "legend": "min"
          },
          {
            "refId": "C",
            "expr": "avg(\n    max_over_time(process_resident_memory_bytes{job=~\"$storage\", instance=~\"$instance\"}[5m])\n    /\n    vm_available_memory_bytes{job=~\"$storage\", instance=~\"$instance\"}\n)",
            "legend": "avg"
          }
        ],
        "name": "Memory usage % ($instance)",
        "links": [],
        "description": "已用内存的百分比（常驻）。当内存使用率接近 100% 时，应用程序的性能将显着下降。",
        "maxPerRow": 4,
        "options": {
          "tooltip": {
            "mode": "multi"
          },
          "legend": {
            "displayMode": "list",
            "placement": "bottom"
          },
          "standardOptions": {
            "util": "percentUnit",
            "min": 0
          },
          "thresholds": {
            "steps": [
              {
                "color": "#73BF69",
                "value": null,
                "type": "base"
              },
              {
                "color": "#F2495C",
                "value": 0.9
              }
            ]
          }
        },
        "custom": {
          "drawStyle": "lines",
          "lineInterpolation": "linear",
          "spanNulls": false,
          "lineWidth": 1,
          "fillOpacity": 0.5,
          "gradientMode": "none",
          "stack": "off",
          "scaleDistribution": {
            "type": "linear"
          }
        }
      },
      {
        "type": "timeseries",
        "id": "0fb1c607-1dff-4906-bfde-a083be35719f",
        "layout": {
          "h": 8,
          "w": 12,
          "x": 0,
          "y": 136,
          "i": "0fb1c607-1dff-4906-bfde-a083be35719f",
          "isResizable": true
        },
        "version": "2.0.0",
        "datasourceCate": "prometheus",
        "targets": [
          {
            "refId": "A",
            "expr": "vm_storage_is_read_only{job=~\"$storage\", instance=~\"$instance\"} > 0",
            "legend": "{{ instance }}"
          }
        ],
        "name": "Readonly mode",
        "links": [],
        "description": "> 0表示vmstorage处于只读模式。",
        "maxPerRow": 4,
        "options": {
          "tooltip": {
            "mode": "multi"
          },
          "legend": {
            "displayMode": "list",
            "placement": "bottom"
          },
          "standardOptions": {
            "util": "none"
          },
          "thresholds": {
            "steps": [
              {
                "color": "#73BF69",
                "value": null,
                "type": "base"
              },
              {
                "color": "#F2495C",
                "value": 80
              }
            ]
          }
        },
        "custom": {
          "drawStyle": "lines",
          "lineInterpolation": "linear",
          "spanNulls": false,
          "lineWidth": 1,
          "fillOpacity": 0.5,
          "gradientMode": "none",
          "stack": "off",
          "scaleDistribution": {
            "type": "linear"
          }
        }
      },
      {
        "type": "timeseries",
        "id": "57f9de7a-7fc7-453a-a3a5-d6e4a6b3cdad",
        "layout": {
          "h": 8,
          "w": 12,
          "x": 12,
          "y": 136,
          "i": "57f9de7a-7fc7-453a-a3a5-d6e4a6b3cdad",
          "isResizable": true
        },
        "version": "2.0.0",
        "datasourceCate": "prometheus",
        "targets": [
          {
            "refId": "A",
            "expr": "max(\n    max_over_time(vm_concurrent_addrows_current{job=~\"$storage\", \n    instance=~\"$instance\"}[5m])\n)",
            "legend": "current"
          },
          {
            "refId": "B",
            "expr": "min(vm_concurrent_addrows_capacity{job=~\"$storage\", instance=~\"$instance\"})",
            "legend": "max"
          }
        ],
        "name": "Concurrent flushes on disk ($instance)",
        "links": [],
        "description": "显示磁盘上正在进行的插入(不是API/写调用)的数量，其中: \n* ' max ' -等于cpu的数量; \n* ' current ' -当前忙于将行插入底层存储的例程数量。 \n \n每个成功的API /写调用都会在磁盘上刷新。“max”是内部限制，不能更改。它总是等于cpu的数量。 \n \n当“current”不断达到“max”时，这意味着存储过载，需要更多的CPU或更快的磁盘。",
        "maxPerRow": 4,
        "options": {
          "tooltip": {
            "mode": "multi"
          },
          "legend": {
            "displayMode": "list",
            "placement": "bottom"
          },
          "standardOptions": {
            "util": "none"
          },
          "thresholds": {
            "steps": [
              {
                "color": "#73BF69",
                "value": null,
                "type": "base"
              },
              {
                "color": "#F2495C",
                "value": 80
              }
            ]
          }
        },
        "custom": {
          "drawStyle": "lines",
          "lineInterpolation": "linear",
          "spanNulls": false,
          "lineWidth": 1,
          "fillOpacity": 0.5,
          "gradientMode": "none",
          "stack": "off",
          "scaleDistribution": {
            "type": "linear"
          }
        }
      },
      {
        "type": "timeseries",
        "id": "82b1a90d-3e80-4129-8047-4ccfbd8609af",
        "layout": {
          "h": 8,
          "w": 12,
          "x": 0,
          "y": 144,
          "i": "82b1a90d-3e80-4129-8047-4ccfbd8609af",
          "isResizable": true
        },
        "version": "2.0.0",
        "datasourceCate": "prometheus",
        "targets": [
          {
            "refId": "A",
            "expr": "sum(max_over_time(vm_active_merges{job=~\"$storage\", instance=~\"$instance\"}[5m])) by(type)",
            "legend": "{{type}}"
          }
        ],
        "name": "Active merges ($instance)",
        "links": [],
        "description": "存储节点中正在进行的合并数。预计会有大量的[存储/小指标]。",
        "maxPerRow": 4,
        "options": {
          "tooltip": {
            "mode": "multi"
          },
          "legend": {
            "displayMode": "list",
            "placement": "bottom"
          },
          "standardOptions": {
            "util": "none",
            "min": 0,
            "decimals": 0
          },
          "thresholds": {
            "steps": [
              {
                "color": "#73BF69",
                "value": null,
                "type": "base"
              },
              {
                "color": "#F2495C",
                "value": 80
              }
            ]
          }
        },
        "custom": {
          "drawStyle": "lines",
          "lineInterpolation": "linear",
          "spanNulls": false,
          "lineWidth": 1,
          "fillOpacity": 0.5,
          "gradientMode": "none",
          "stack": "off",
          "scaleDistribution": {
            "type": "linear"
          }
        }
      },
      {
        "type": "timeseries",
        "id": "a4ea4f0a-94ad-4d1f-b1df-e9cc7218e5eb",
        "layout": {
          "h": 8,
          "w": 12,
          "x": 12,
          "y": 144,
          "i": "a4ea4f0a-94ad-4d1f-b1df-e9cc7218e5eb",
          "isResizable": true
        },
        "version": "2.0.0",
        "datasourceCate": "prometheus",
        "targets": [
          {
            "refId": "A",
            "expr": "sum(rate(vm_rows_merged_total{job=~\"$storage\", instance=~\"$instance\"}[5m])) by(type)",
            "legend": "{{type}}"
          }
        ],
        "name": "Merge speed",
        "links": [],
        "description": "存储节点每秒合并的行数",
        "maxPerRow": 4,
        "options": {
          "tooltip": {
            "mode": "multi"
          },
          "legend": {
            "displayMode": "list",
            "placement": "bottom"
          },
          "standardOptions": {
            "util": "none",
            "min": 0,
            "decimals": 0
          },
          "thresholds": {
            "steps": [
              {
                "color": "#73BF69",
                "value": null,
                "type": "base"
              },
              {
                "color": "#F2495C",
                "value": 80
              }
            ]
          }
        },
        "custom": {
          "drawStyle": "lines",
          "lineInterpolation": "linear",
          "spanNulls": false,
          "lineWidth": 1,
          "fillOpacity": 0.5,
          "gradientMode": "none",
          "stack": "off",
          "scaleDistribution": {
            "type": "linear"
          }
        }
      },
      {
        "type": "timeseries",
        "id": "e8ccf000-fedb-43a8-aefb-95fca44eb8f0",
        "layout": {
          "h": 8,
          "w": 12,
          "x": 0,
          "y": 152,
          "i": "e8ccf000-fedb-43a8-aefb-95fca44eb8f0",
          "isResizable": true
        },
        "version": "2.0.0",
        "datasourceCate": "prometheus",
        "targets": [
          {
            "refId": "A",
            "expr": "max(\n    sum(vm_data_size_bytes{job=~\"$job\", instance=~\"$instance\"}) by(job, instance) /\n    (\n        sum(vm_free_disk_space_bytes{job=~\"$job\", instance=~\"$instance\"}) by(job, instance) +\n        sum(vm_data_size_bytes{job=~\"$job\", instance=~\"$instance\"}) by(job, instance)\n    ) \n)",
            "legend": "max"
          },
          {
            "refId": "B",
            "expr": "min(\n    sum(vm_data_size_bytes{job=~\"$job\", instance=~\"$instance\"}) by(job, instance) /\n    (\n        sum(vm_free_disk_space_bytes{job=~\"$job\", instance=~\"$instance\"}) by(job, instance) +\n        sum(vm_data_size_bytes{job=~\"$job\", instance=~\"$instance\"}) by(job, instance)\n    ) \n)",
            "legend": "min"
          },
          {
            "refId": "C",
            "expr": "avg(\n    sum(vm_data_size_bytes{job=~\"$job\", instance=~\"$instance\"}) by(job, instance) /\n    (\n        sum(vm_free_disk_space_bytes{job=~\"$job\", instance=~\"$instance\"}) by(job, instance) +\n        sum(vm_data_size_bytes{job=~\"$job\", instance=~\"$instance\"}) by(job, instance)\n    ) \n)",
            "legend": "avg"
          }
        ],
        "name": "Disk space usage %  ($instance)",
        "links": [],
        "description": "显示已用磁盘空间的百分比。建议至少有 20% 的可用磁盘空间以获得最佳性能。",
        "maxPerRow": 4,
        "options": {
          "tooltip": {
            "mode": "multi"
          },
          "legend": {
            "displayMode": "list",
            "placement": "bottom"
          },
          "standardOptions": {
            "util": "percentUnit",
            "min": 0
          },
          "thresholds": {
            "steps": [
              {
                "color": "#73BF69",
                "value": null,
                "type": "base"
              },
              {
                "color": "#F2495C",
                "value": 80
              }
            ]
          }
        },
        "custom": {
          "drawStyle": "lines",
          "lineInterpolation": "linear",
          "spanNulls": false,
          "lineWidth": 1,
          "fillOpacity": 0.5,
          "gradientMode": "none",
          "stack": "off",
          "scaleDistribution": {
            "type": "linear"
          }
        }
      },
      {
        "type": "timeseries",
        "id": "e7dcd30f-66d7-4af5-a138-28325c85ecb2",
        "layout": {
          "h": 8,
          "w": 12,
          "x": 12,
          "y": 152,
          "i": "e7dcd30f-66d7-4af5-a138-28325c85ecb2",
          "isResizable": true
        },
        "version": "2.0.0",
        "datasourceCate": "prometheus",
        "targets": [
          {
            "refId": "A",
            "expr": "max(vm_parts{job=~\"$storage\", instance=~\"$instance\"}) by(type)",
            "legend": "{{type}}"
          }
        ],
        "name": "LSM parts max by type ($instance)",
        "links": [],
        "description": "所有存储节点上 LSM 树的最大数据部分数。大量部件（硬限制为 512）是合并性能缓慢的证据 - 检查资源利用率。\n\nindexdb — 倒排索引\nstorage/small - 最近添加的部分数据被抓取到存储中（热数据）\nstorage/big - 小部分逐渐合并为大部分（冷数据）",
        "maxPerRow": 4,
        "options": {
          "tooltip": {
            "mode": "multi"
          },
          "legend": {
            "displayMode": "list",
            "placement": "bottom"
          },
          "standardOptions": {
            "util": "none",
            "min": 0
          },
          "thresholds": {
            "steps": [
              {
                "color": "#73BF69",
                "value": null,
                "type": "base"
              },
              {
                "color": "#F2495C",
                "value": 80
              }
            ]
          }
        },
        "custom": {
          "drawStyle": "lines",
          "lineInterpolation": "linear",
          "spanNulls": false,
          "lineWidth": 1,
          "fillOpacity": 0.5,
          "gradientMode": "none",
          "stack": "off",
          "scaleDistribution": {
            "type": "linear"
          }
        }
      },
      {
        "type": "timeseries",
        "id": "817bdcd4-b83f-429b-8439-68edb181cea0",
        "layout": {
          "h": 8,
          "w": 12,
          "x": 0,
          "y": 160,
          "i": "817bdcd4-b83f-429b-8439-68edb181cea0",
          "isResizable": true
        },
        "version": "2.0.0",
        "datasourceCate": "prometheus",
        "targets": [
          {
            "refId": "A",
            "expr": "max(\n    sum(vm_data_size_bytes{job=~\"$job\", instance=~\"$instance\", type=~\"indexdb.*\"}) by(job, instance)\n    / \n    sum(vm_data_size_bytes{job=~\"$job\", instance=~\"$instance\"}) by(job, instance)\n)",
            "legend": "indexdb"
          },
          {
            "refId": "B",
            "expr": "max(\n    sum(vm_data_size_bytes{job=~\"$job\", instance=~\"$instance\", type!~\"indexdb.*\"}) by(job, instance)\n    / \n    sum(vm_data_size_bytes{job=~\"$job\", instance=~\"$instance\"}) by(job, instance)\n)",
            "legend": "datapoints"
          }
        ],
        "name": "Disk space usage % by type  ($instance)",
        "links": [],
        "description": "按类型显示已用磁盘空间的百分比：datapoints 或 indexdb。通常，与数据点相比，indexdb 占用的空间要少得多。但是随着流失率的提高，indexdb 的大小可能会显着增长。\n\n% 的总和可以 > 100%，因为面板显示每个作业和每个实例的最大 %。这意味着不同的实例在数据点和索引数据库大小之间可以有不同的比率。",
        "maxPerRow": 4,
        "options": {
          "tooltip": {
            "mode": "multi"
          },
          "legend": {
            "displayMode": "list",
            "placement": "bottom"
          },
          "standardOptions": {
            "util": "percentUnit",
            "min": 0
          },
          "thresholds": {
            "steps": [
              {
                "color": "#73BF69",
                "value": null,
                "type": "base"
              }
            ]
          }
        },
        "custom": {
          "drawStyle": "lines",
          "lineInterpolation": "linear",
          "spanNulls": false,
          "lineWidth": 1,
          "fillOpacity": 0.5,
          "gradientMode": "none",
          "stack": "off",
          "scaleDistribution": {
            "type": "linear"
          }
        }
      },
      {
        "version": "2.0.0",
        "id": "71aec357-04e8-4180-b808-0ebb61aeaa0e",
        "type": "timeseries",
        "name": "Pending datapoints ($instance)",
        "description": "How many datapoints are in RAM queue waiting to be written into storage. The number of pending data points should be in the range from 0 to `2*<ingestion_rate>`, since VictoriaMetrics pushes pending data to persistent storage every second. The index datapoints value in general is much lower.",
        "links": [],
        "layout": {
          "h": 8,
          "w": 12,
          "x": 12,
          "y": 160,
          "i": "71aec357-04e8-4180-b808-0ebb61aeaa0e",
          "isResizable": true
        },
        "targets": [
          {
            "refId": "A",
            "expr": "sum(max_over_time(vm_pending_rows{job=~\"$storage\", instance=~\"$instance\", type=\"storage\"}[5m]))",
            "legend": "pending datapoints"
          },
          {
            "refId": "B",
            "expr": "sum(max_over_time(vm_pending_rows{job=~\"$storage\", instance=~\"$instance\", type=\"indexdb\"}[5m]))",
            "legend": "pending index entries"
          }
        ],
        "options": {
          "valueMappings": [],
          "thresholds": {
            "mode": "absolute",
            "style": "off",
            "steps": [
              {
                "color": "#73BF69",
                "value": null,
                "type": "base"
              },
              {
                "color": "#F2495C",
                "value": 80
              }
            ]
          },
          "standardOptions": {
            "util": "none",
            "min": 0
          },
          "legend": {
            "displayMode": "list",
            "placement": "bottom"
          },
          "tooltip": {
            "mode": "multi"
          }
        },
        "custom": {
          "version": "2.0.0",
          "drawStyle": "lines",
          "lineInterpolation": "linear",
          "fillOpacity": 0.5,
          "stack": "off"
        },
        "maxPerRow": 4
      },
      {
        "type": "timeseries",
        "id": "e172680e-5d73-4568-b32b-0b4ef0eebfd3",
        "layout": {
          "h": 8,
          "w": 12,
          "x": 0,
          "y": 168,
          "i": "e172680e-5d73-4568-b32b-0b4ef0eebfd3",
          "isResizable": true
        },
        "version": "2.0.0",
        "datasourceCate": "prometheus",
        "targets": [
          {
            "refId": "A",
            "expr": "sum(increase(vm_rows_ignored_total{job=~\"$storage\", instance=~\"$instance\"}[1h])) by (reason)",
            "legend": "{{reason}}"
          }
        ],
        "name": "Rows ignored for last 1h ($instance)",
        "links": [],
        "description": "显示一小时时间范围内由于损坏或超出保留时间戳而在插入时忽略了多少行，正常情况下为0；",
        "maxPerRow": 4,
        "options": {
          "tooltip": {
            "mode": "multi"
          },
          "legend": {
            "displayMode": "list",
            "placement": "bottom"
          },
          "standardOptions": {
            "util": "none"
          },
          "thresholds": {
            "steps": [
              {
                "color": "#73BF69",
                "value": null,
                "type": "base"
              },
              {
                "color": "#F2495C",
                "value": 80
              }
            ]
          }
        },
        "custom": {
          "drawStyle": "lines",
          "lineInterpolation": "linear",
          "spanNulls": false,
          "lineWidth": 1,
          "fillOpacity": 0.5,
          "gradientMode": "none",
          "stack": "off",
          "scaleDistribution": {
            "type": "linear"
          }
        }
      },
      {
        "version": "2.0.0",
        "id": "47fed7f1-260b-4bf2-8d5c-0b5cb58c542d",
        "type": "row",
        "name": "vmselect ($instance)",
        "collapsed": true,
        "layout": {
          "h": 1,
          "w": 24,
          "x": 0,
          "y": 176,
          "i": "47fed7f1-260b-4bf2-8d5c-0b5cb58c542d",
          "isResizable": false
        },
        "panels": []
      },
      {
        "type": "timeseries",
        "id": "5214fb3d-7d6c-4796-a39d-008f86d91eda",
        "layout": {
          "h": 8,
          "w": 12,
          "x": 0,
          "y": 177,
          "i": "5214fb3d-7d6c-4796-a39d-008f86d91eda",
          "isResizable": true
        },
        "version": "2.0.0",
        "datasourceCate": "prometheus",
        "targets": [
          {
            "refId": "A",
            "expr": "sum(rate(vm_http_requests_total{job=~\"$select\", instance=~\"$instance\", path!~\"/favicon.ico|/metrics\"}[5m])) by (path) > 0",
            "legend": "{{path}}"
          }
        ],
        "name": "Requests rate ($instance)",
        "links": [],
        "description": "vmselect 节点接受的请求率",
        "maxPerRow": 4,
        "options": {
          "tooltip": {
            "mode": "multi"
          },
          "legend": {
            "displayMode": "list",
            "placement": "bottom"
          },
          "standardOptions": {
            "util": "none",
            "min": 0
          },
          "thresholds": {
            "steps": [
              {
                "color": "#73BF69",
                "value": null,
                "type": "base"
              },
              {
                "color": "#F2495C",
                "value": 80
              }
            ]
          }
        },
        "custom": {
          "drawStyle": "lines",
          "lineInterpolation": "linear",
          "spanNulls": false,
          "lineWidth": 1,
          "fillOpacity": 0.5,
          "gradientMode": "none",
          "stack": "off",
          "scaleDistribution": {
            "type": "linear"
          }
        }
      },
      {
        "type": "timeseries",
        "id": "b1a54478-360f-46d0-ac5d-b5957f3b9a4a",
        "layout": {
          "h": 8,
          "w": 12,
          "x": 12,
          "y": 177,
          "i": "b1a54478-360f-46d0-ac5d-b5957f3b9a4a",
          "isResizable": true
        },
        "version": "2.0.0",
        "datasourceCate": "prometheus",
        "targets": [
          {
            "refId": "A",
            "expr": "max(max_over_time(vm_concurrent_select_current{job=~\"$select\", instance=~\"$instance\"}[5m])) ",
            "legend": "current"
          },
          {
            "refId": "B",
            "expr": "min(vm_concurrent_select_capacity{job=~\"$select\", instance=~\"$instance\"})",
            "legend": "max"
          }
        ],
        "name": "Concurrent selects ($instance)",
        "links": [],
        "description": "显示跨实例的最大并发选择数。\n* `max` - 默认情况下等于 CPU 数量 * 2。可以配置 `search.maxConcurrentRequests` 标志\n* `current` - 当前忙于处理请求的 goroutines 数量\n\n当 current 不断达到 max 时，这意味着一个或多个 vmselect 节点过载，需要更多 CPU 或更好的负载平衡。如果 CPU 面板显示有可用资源 - 尝试增加 `search.maxConcurrentRequests`。",
        "maxPerRow": 4,
        "options": {
          "tooltip": {
            "mode": "multi"
          },
          "legend": {
            "displayMode": "list",
            "placement": "bottom"
          },
          "standardOptions": {
            "util": "none",
            "min": 0,
            "decimals": 0
          },
          "thresholds": {
            "steps": [
              {
                "color": "#73BF69",
                "value": null,
                "type": "base"
              },
              {
                "color": "#F2495C",
                "value": 80
              }
            ]
          }
        },
        "custom": {
          "drawStyle": "lines",
          "lineInterpolation": "linear",
          "spanNulls": false,
          "lineWidth": 1,
          "fillOpacity": 0.5,
          "gradientMode": "none",
          "stack": "off",
          "scaleDistribution": {
            "type": "linear"
          }
        }
      },
      {
        "version": "2.0.0",
        "id": "70fee9dd-61a1-4c1c-9fbd-101b8b61ffa5",
        "type": "timeseries",
        "name": "CPU usage % ($instance)",
        "links": [],
        "layout": {
          "h": 8,
          "w": 12,
          "x": 0,
          "y": 185,
          "i": "70fee9dd-61a1-4c1c-9fbd-101b8b61ffa5",
          "isResizable": true
        },
        "targets": [
          {
            "refId": "A",
            "expr": "max(\n    rate(process_cpu_seconds_total{job=~\"$select\", instance=~\"$instance\"}[5m])\n    /\n    process_cpu_cores_available{job=~\"$select\", instance=~\"$instance\"}\n)",
            "legend": "max"
          },
          {
            "refId": "B",
            "expr": "min(\n    rate(process_cpu_seconds_total{job=~\"$select\", instance=~\"$instance\"}[5m])\n    /\n    process_cpu_cores_available{job=~\"$select\", instance=~\"$instance\"}\n)",
            "legend": "min"
          },
          {
            "refId": "C",
            "expr": "avg(\n    rate(process_cpu_seconds_total{job=~\"$select\", instance=~\"$instance\"}[5m])\n    /\n    process_cpu_cores_available{job=~\"$select\", instance=~\"$instance\"}\n)",
            "legend": "avg"
          }
        ],
        "options": {
          "valueMappings": [],
          "thresholds": {
            "mode": "absolute",
            "style": "line",
            "steps": [
              {
                "color": "#73BF69"
              },
              {
                "color": "#F2495C",
                "value": 0.9
              }
            ]
          },
          "standardOptions": {
            "util": "percentUnit",
            "min": 0
          },
          "legend": {
            "displayMode": "list",
            "placement": "bottom"
          },
          "tooltip": {
            "mode": "multi"
          }
        },
        "custom": {
          "version": "2.0.0",
          "drawStyle": "lines",
          "lineInterpolation": "linear",
          "fillOpacity": 0.5,
          "stack": "off"
        },
        "maxPerRow": 4
      },
      {
        "version": "2.0.0",
        "id": "f1f98135-9133-49fb-b9ce-f401206ce005",
        "type": "timeseries",
        "name": "Memory usage % ($instance)",
        "links": [],
        "layout": {
          "h": 8,
          "w": 12,
          "x": 12,
          "y": 185,
          "i": "f1f98135-9133-49fb-b9ce-f401206ce005",
          "isResizable": true
        },
        "targets": [
          {
            "refId": "A",
            "expr": "max(\n    max_over_time(process_resident_memory_bytes{job=~\"$select\", instance=~\"$instance\"}[5m])\n    /\n    vm_available_memory_bytes{job=~\"$select\", instance=~\"$instance\"}\n)",
            "legend": "max"
          },
          {
            "refId": "B",
            "expr": "min(\n    max_over_time(process_resident_memory_bytes{job=~\"$select\", instance=~\"$instance\"}[5m])\n    /\n    vm_available_memory_bytes{job=~\"$select\", instance=~\"$instance\"}\n)",
            "legend": "min"
          },
          {
            "refId": "C",
            "expr": "avg(\n    max_over_time(process_resident_memory_bytes{job=~\"$select\", instance=~\"$instance\"}[5m])\n    /\n    vm_available_memory_bytes{job=~\"$select\", instance=~\"$instance\"}\n)",
            "legend": "avg"
          }
        ],
        "options": {
          "valueMappings": [],
          "thresholds": {
            "mode": "absolute",
            "style": "line",
            "steps": [
              {
                "color": "#73BF69"
              },
              {
                "color": "#F2495C",
                "value": 0.9
              }
            ]
          },
          "standardOptions": {
            "util": "percentUnit",
            "min": 0
          },
          "legend": {
            "displayMode": "list",
            "placement": "bottom"
          },
          "tooltip": {
            "mode": "multi"
          }
        },
        "custom": {
          "version": "2.0.0",
          "drawStyle": "lines",
          "lineInterpolation": "linear",
          "fillOpacity": 0.5,
          "stack": "off"
        },
        "maxPerRow": 4
      },
      {
        "version": "2.0.0",
        "id": "abc3cbf4-b299-4ebb-832f-c6c883976ad8",
        "type": "timeseries",
        "name": "Series read per query ($instance)",
        "description": "99th percentile of the number of time series read per query.",
        "links": [],
        "layout": {
          "h": 8,
          "w": 12,
          "x": 0,
          "y": 193,
          "i": "abc3cbf4-b299-4ebb-832f-c6c883976ad8",
          "isResizable": true
        },
        "targets": [
          {
            "refId": "A",
            "expr": "sum(histogram_quantile(0.99, sum(rate(vm_series_read_per_query_bucket{job=~\"$select\", instance=~\"$instance\"}[5m])) by (instance, vmrange)))",
            "legend": "series"
          }
        ],
        "options": {
          "valueMappings": [],
          "thresholds": {
            "mode": "absolute",
            "style": "off",
            "steps": [
              {
                "color": "#73BF69"
              },
              {
                "color": "#F2495C",
                "value": 80
              }
            ]
          },
          "standardOptions": {
            "util": "none",
            "min": 0,
            "decimals": 2
          },
          "legend": {
            "displayMode": "list",
            "placement": "bottom"
          },
          "tooltip": {
            "mode": "multi"
          }
        },
        "custom": {
          "version": "2.0.0",
          "drawStyle": "lines",
          "lineInterpolation": "linear",
          "fillOpacity": 0.5,
          "stack": "off"
        },
        "maxPerRow": 4
      },
      {
        "version": "2.0.0",
        "id": "d6aa190b-7ba4-4853-b408-79ac7b9d7262",
        "type": "timeseries",
        "name": "Datapoints read per series ($instance)",
        "description": "99th percentile of number of raw datapoints read per queried time series.",
        "links": [],
        "layout": {
          "h": 8,
          "w": 12,
          "x": 12,
          "y": 193,
          "i": "d6aa190b-7ba4-4853-b408-79ac7b9d7262",
          "isResizable": true
        },
        "targets": [
          {
            "refId": "A",
            "expr": "sum(histogram_quantile(0.99, sum(rate(vm_rows_read_per_series_bucket{job=~\"$select\", instance=~\"$instance\"}[5m])) by (instance, vmrange)))",
            "legend": "datapoints"
          }
        ],
        "options": {
          "valueMappings": [],
          "thresholds": {
            "mode": "absolute",
            "style": "off",
            "steps": [
              {
                "color": "#73BF69"
              },
              {
                "color": "#F2495C",
                "value": 80
              }
            ]
          },
          "standardOptions": {
            "util": "none",
            "min": 0,
            "decimals": 2
          },
          "legend": {
            "displayMode": "list",
            "placement": "bottom"
          },
          "tooltip": {
            "mode": "multi"
          }
        },
        "custom": {
          "version": "2.0.0",
          "drawStyle": "lines",
          "lineInterpolation": "linear",
          "fillOpacity": 0.5,
          "stack": "off"
        },
        "maxPerRow": 4
      },
      {
        "version": "2.0.0",
        "id": "1b7e2b67-0c31-4801-a717-7ada0194d94e",
        "type": "timeseries",
        "name": "Datapoints read per query ($instance)",
        "description": "99th percentile of number of raw datapoints read per query.",
        "links": [],
        "layout": {
          "h": 8,
          "w": 12,
          "x": 0,
          "y": 201,
          "i": "1b7e2b67-0c31-4801-a717-7ada0194d94e",
          "isResizable": true
        },
        "targets": [
          {
            "refId": "A",
            "expr": "sum(histogram_quantile(0.99, sum(rate(vm_rows_read_per_query_bucket{job=~\"$select\", instance=~\"$instance\"}[5m])) by (instance, vmrange)))",
            "legend": "datapoints"
          }
        ],
        "options": {
          "valueMappings": [],
          "thresholds": {
            "mode": "absolute",
            "style": "off",
            "steps": [
              {
                "color": "#73BF69"
              },
              {
                "color": "#F2495C",
                "value": 80
              }
            ]
          },
          "standardOptions": {
            "util": "none",
            "min": 0,
            "decimals": 2
          },
          "legend": {
            "displayMode": "list",
            "placement": "bottom"
          },
          "tooltip": {
            "mode": "multi"
          }
        },
        "custom": {
          "version": "2.0.0",
          "drawStyle": "lines",
          "lineInterpolation": "linear",
          "fillOpacity": 0.5,
          "stack": "off"
        },
        "maxPerRow": 4
      },
      {
        "version": "2.0.0",
        "id": "28ab893f-efd9-4e40-80ea-fb50cec4e925",
        "type": "timeseries",
        "name": "Datapoints scanned per series ($instance)",
        "description": "99th percentile of number of raw datapoints scanner per query.\n\nThis number can exceed number of DatapointsReadPerQuery if `step` query arg passed to [/api/v1/query_range](https://prometheus.io/docs/prometheus/latest/querying/api/#range-queries) is smaller than the lookbehind window set in square brackets of [rollup function](https://docs.victoriametrics.com/MetricsQL.html#rollup-functions). For example, if `increase(some_metric[1h])` is executed with the `step=5m`, then the same raw samples on a hour time range are scanned `1h/5m=12` times. See [this article](https://valyala.medium.com/how-to-optimize-promql-and-metricsql-queries-85a1b75bf986) for details.",
        "links": [],
        "layout": {
          "h": 8,
          "w": 12,
          "x": 12,
          "y": 201,
          "i": "28ab893f-efd9-4e40-80ea-fb50cec4e925",
          "isResizable": true
        },
        "targets": [
          {
            "refId": "A",
            "expr": "sum(histogram_quantile(0.99, sum(rate(vm_rows_scanned_per_query_bucket{job=~\"$select\", instance=~\"$instance\"}[5m])) by (instance, vmrange)))",
            "legend": "datapoints"
          }
        ],
        "options": {
          "valueMappings": [],
          "thresholds": {
            "mode": "absolute",
            "style": "off",
            "steps": [
              {
                "color": "#73BF69"
              },
              {
                "color": "#F2495C",
                "value": 80
              }
            ]
          },
          "standardOptions": {
            "util": "none",
            "min": 0,
            "decimals": 2
          },
          "legend": {
            "displayMode": "list",
            "placement": "bottom"
          },
          "tooltip": {
            "mode": "multi"
          }
        },
        "custom": {
          "version": "2.0.0",
          "drawStyle": "lines",
          "lineInterpolation": "linear",
          "fillOpacity": 0.5,
          "stack": "off"
        },
        "maxPerRow": 4
      },
      {
        "type": "timeseries",
        "id": "e10ec01f-8276-4e92-9040-38257a4732a8",
        "layout": {
          "h": 8,
          "w": 24,
          "x": 0,
          "y": 209,
          "i": "e10ec01f-8276-4e92-9040-38257a4732a8",
          "isResizable": true
        },
        "version": "2.0.0",
        "datasourceCate": "prometheus",
        "targets": [
          {
            "refId": "A",
            "expr": "sum(rate(vm_tcplistener_read_bytes_total{job=~\"$select\", instance=~\"$instance\"}[5m])) * 8 > 0",
            "legend": "read"
          },
          {
            "refId": "B",
            "expr": "sum(rate(vm_tcplistener_written_bytes_total{job=~\"$select\", instance=~\"$instance\"}[5m])) * 8 > 0",
            "legend": "write "
          }
        ],
        "name": "Network usage ($instance)",
        "links": [],
        "description": "5分钟内网络使用率",
        "maxPerRow": 4,
        "options": {
          "tooltip": {
            "mode": "multi"
          },
          "legend": {
            "displayMode": "list",
            "placement": "bottom"
          },
          "standardOptions": {
            "util": "bitsSI"
          },
          "thresholds": {
            "steps": [
              {
                "color": "#73BF69",
                "value": null,
                "type": "base"
              },
              {
                "color": "#F2495C",
                "value": 80
              }
            ]
          }
        },
        "custom": {
          "drawStyle": "lines",
          "lineInterpolation": "linear",
          "spanNulls": false,
          "lineWidth": 1,
          "fillOpacity": 0.5,
          "gradientMode": "none",
          "stack": "off",
          "scaleDistribution": {
            "type": "linear"
          }
        }
      },
      {
        "version": "2.0.0",
        "id": "b888b6ae-d2e5-4dcb-b649-c8364b29304a",
        "type": "row",
        "name": "vminsert ($instance)",
        "collapsed": true,
        "layout": {
          "h": 1,
          "w": 24,
          "x": 0,
          "y": 217,
          "i": "b888b6ae-d2e5-4dcb-b649-c8364b29304a",
          "isResizable": false
        },
        "panels": []
      },
      {
        "type": "timeseries",
        "id": "64b2044b-e481-4faa-bd02-3e2b7ee1acf3",
        "layout": {
          "h": 8,
          "w": 12,
          "x": 0,
          "y": 218,
          "i": "64b2044b-e481-4faa-bd02-3e2b7ee1acf3",
          "isResizable": true
        },
        "version": "2.0.0",
        "datasourceCate": "prometheus",
        "targets": [
          {
            "refId": "A",
            "expr": "sum(rate(vm_http_requests_total{job=~\"$insert\", instance=~\"$instance\", path!~\"/favicon.ico|/metrics\"}[5m])) by (path) > 0",
            "legend": "{{path}}"
          }
        ],
        "name": "Requests rate ($instance)",
        "links": [],
        "description": "* - 不支持的查询路径\n\n/write - 插入虚拟机\n\n/metrics - 查询 VM 系统指标\n\n/query - 查询即时值\n\n/query_range - 在一段时间内查询\n\n/series - 匹配某个标签集\n\n/label/{}/values - 查询标签值列表（主要是变量）",
        "maxPerRow": 4,
        "options": {
          "tooltip": {
            "mode": "multi"
          },
          "legend": {
            "displayMode": "list",
            "placement": "bottom"
          },
          "standardOptions": {
            "util": "none",
            "min": 0
          },
          "thresholds": {
            "steps": [
              {
                "color": "#73BF69",
                "value": null,
                "type": "base"
              },
              {
                "color": "#F2495C",
                "value": 80
              }
            ]
          }
        },
        "custom": {
          "drawStyle": "lines",
          "lineInterpolation": "linear",
          "spanNulls": false,
          "lineWidth": 1,
          "fillOpacity": 0.5,
          "gradientMode": "none",
          "stack": "off",
          "scaleDistribution": {
            "type": "linear"
          }
        }
      },
      {
        "type": "timeseries",
        "id": "d02921bc-1482-45c4-adf8-f25c7e7dafe2",
        "layout": {
          "h": 8,
          "w": 12,
          "x": 12,
          "y": 218,
          "i": "d02921bc-1482-45c4-adf8-f25c7e7dafe2",
          "isResizable": true
        },
        "version": "2.0.0",
        "datasourceCate": "prometheus",
        "targets": [
          {
            "refId": "A",
            "expr": "max(max_over_time(vm_concurrent_insert_current{job=~\"$insert\", instance=~\"$instance\"}[5m]))",
            "legend": "current"
          },
          {
            "refId": "B",
            "expr": "min(vm_concurrent_insert_capacity{job=~\"$insert\", instance=~\"$instance\"})",
            "legend": "max"
          }
        ],
        "name": "Concurrent inserts ($instance)",
        "links": [],
        "description": "显示正在进行的插入的最大数量。\n\nmax - 默认情况下等于 CPU 数量 * 4，可以配置 maxConcurrentInserts 标志；\n\ncurrent - 当前忙于处理请求的 goroutines 数量。\n\n-maxConcurrentInserts 限制在任何给定时间点可以主动处理的插入请求的数量。所有其他插入\n请求都排队等待 \n\n-insert.maxQueueDuration，希望它们有机会被处理。该队列主要用于吸收传入插入请求率的峰值。\n\n当命中不断达到最大值时，这意味着 vminsert 节点过载并且需要更多的 CPU 或更高的限制。",
        "maxPerRow": 4,
        "options": {
          "tooltip": {
            "mode": "multi"
          },
          "legend": {
            "displayMode": "list",
            "placement": "bottom"
          },
          "standardOptions": {
            "util": "none",
            "min": 0,
            "decimals": 0
          },
          "thresholds": {
            "steps": [
              {
                "color": "#73BF69",
                "value": null,
                "type": "base"
              },
              {
                "color": "#F2495C",
                "value": 80
              }
            ]
          }
        },
        "custom": {
          "drawStyle": "lines",
          "lineInterpolation": "linear",
          "spanNulls": false,
          "lineWidth": 1,
          "fillOpacity": 0.1,
          "gradientMode": "none",
          "stack": "off",
          "scaleDistribution": {
            "type": "linear"
          }
        }
      },
      {
        "type": "timeseries",
        "id": "97d5079f-c104-4e8f-b2ac-d66eeb288f32",
        "layout": {
          "h": 8,
          "w": 12,
          "x": 0,
          "y": 226,
          "i": "97d5079f-c104-4e8f-b2ac-d66eeb288f32",
          "isResizable": true
        },
        "version": "2.0.0",
        "datasourceCate": "prometheus",
        "targets": [
          {
            "refId": "A",
            "expr": "max(\n    rate(process_cpu_seconds_total{job=~\"$insert\", instance=~\"$instance\"}[5m])\n    /\n    process_cpu_cores_available{job=~\"$insert\", instance=~\"$instance\"}\n)",
            "legend": "max"
          },
          {
            "refId": "B",
            "expr": "min(\n    rate(process_cpu_seconds_total{job=~\"$insert\", instance=~\"$instance\"}[5m])\n    /\n    process_cpu_cores_available{job=~\"$insert\", instance=~\"$instance\"}\n)",
            "legend": "min"
          },
          {
            "refId": "C",
            "expr": "avg(\n    rate(process_cpu_seconds_total{job=~\"$insert\", instance=~\"$instance\"}[5m])\n    /\n    process_cpu_cores_available{job=~\"$insert\", instance=~\"$instance\"}\n)",
            "legend": "avg"
          }
        ],
        "name": "CPU usage % ($instance)",
        "links": [],
        "description": "5分钟内insert组件CPU使用率",
        "maxPerRow": 4,
        "options": {
          "tooltip": {
            "mode": "multi"
          },
          "legend": {
            "displayMode": "list",
            "placement": "bottom"
          },
          "standardOptions": {
            "util": "percentUnit",
            "min": 0
          },
          "thresholds": {
            "steps": [
              {
                "color": "#73BF69",
                "value": null,
                "type": "base"
              },
              {
                "color": "#F2495C",
                "value": 0.9
              }
            ]
          }
        },
        "custom": {
          "drawStyle": "lines",
          "lineInterpolation": "linear",
          "spanNulls": false,
          "lineWidth": 1,
          "fillOpacity": 0.5,
          "gradientMode": "none",
          "stack": "off",
          "scaleDistribution": {
            "type": "linear"
          }
        }
      },
      {
        "type": "timeseries",
        "id": "6b7a3248-7307-4166-b2b8-9283a687e166",
        "layout": {
          "h": 8,
          "w": 12,
          "x": 12,
          "y": 226,
          "i": "6b7a3248-7307-4166-b2b8-9283a687e166",
          "isResizable": true
        },
        "version": "2.0.0",
        "datasourceCate": "prometheus",
        "targets": [
          {
            "refId": "A",
            "expr": "max(\n    max_over_time(process_resident_memory_bytes{job=~\"$insert\", instance=~\"$instance\"}[5m])\n    /\n    vm_available_memory_bytes{job=~\"$insert\", instance=~\"$instance\"}\n)",
            "legend": "max"
          },
          {
            "refId": "B",
            "expr": "min(\n    max_over_time(process_resident_memory_bytes{job=~\"$insert\", instance=~\"$instance\"}[5m])\n    /\n    vm_available_memory_bytes{job=~\"$insert\", instance=~\"$instance\"}\n)",
            "legend": "min"
          },
          {
            "refId": "C",
            "expr": "avg(\n    max_over_time(process_resident_memory_bytes{job=~\"$insert\", instance=~\"$instance\"}[5m])\n    /\n    vm_available_memory_bytes{job=~\"$insert\", instance=~\"$instance\"}\n)",
            "legend": "avg"
          }
        ],
        "name": "Memory usage % ($instance)",
        "links": [],
        "description": "5分钟以内insert组件内存使用率",
        "maxPerRow": 4,
        "options": {
          "tooltip": {
            "mode": "multi"
          },
          "legend": {
            "displayMode": "list",
            "placement": "bottom"
          },
          "standardOptions": {
            "util": "percentUnit",
            "min": 0
          },
          "thresholds": {
            "steps": [
              {
                "color": "#73BF69",
                "value": null,
                "type": "base"
              },
              {
                "color": "#F2495C",
                "value": 0.9
              }
            ]
          }
        },
        "custom": {
          "drawStyle": "lines",
          "lineInterpolation": "linear",
          "spanNulls": false,
          "lineWidth": 1,
          "fillOpacity": 0.5,
          "gradientMode": "none",
          "stack": "off",
          "scaleDistribution": {
            "type": "linear"
          }
        }
      },
      {
        "type": "timeseries",
        "id": "ebe4d8cf-96f4-4c8e-88a4-eebc26bbea4e",
        "layout": {
          "h": 8,
          "w": 12,
          "x": 0,
          "y": 234,
          "i": "ebe4d8cf-96f4-4c8e-88a4-eebc26bbea4e",
          "isResizable": true
        },
        "version": "2.0.0",
        "datasourceCate": "prometheus",
        "targets": [
          {
            "refId": "A",
            "expr": "sum(rate(vm_tcplistener_read_bytes_total{job=~\"$insert\", instance=~\"$instance\"}[5m])) * 8 > 0",
            "legend": "read"
          }
        ],
        "name": "Network usage ($instance)",
        "links": [],
        "description": "5分钟内网络读取速率",
        "maxPerRow": 4,
        "options": {
          "tooltip": {
            "mode": "multi"
          },
          "legend": {
            "displayMode": "list",
            "placement": "bottom"
          },
          "standardOptions": {
            "util": "none"
          },
          "thresholds": {
            "steps": [
              {
                "color": "#73BF69",
                "value": null,
                "type": "base"
              },
              {
                "color": "#F2495C",
                "value": 80
              }
            ]
          }
        },
        "custom": {
          "drawStyle": "lines",
          "lineInterpolation": "linear",
          "spanNulls": false,
          "lineWidth": 1,
          "fillOpacity": 0.5,
          "gradientMode": "none",
          "stack": "normal",
          "scaleDistribution": {
            "type": "linear"
          }
        }
      },
      {
        "type": "timeseries",
        "id": "7866fa29-5c62-4fe8-b20e-90070a102428",
        "layout": {
          "h": 8,
          "w": 12,
          "x": 12,
          "y": 234,
          "i": "7866fa29-5c62-4fe8-b20e-90070a102428",
          "isResizable": true
        },
        "version": "2.0.0",
        "datasourceCate": "prometheus",
        "targets": [
          {
            "refId": "A",
            "expr": "max(histogram_quantile(0.99, sum(increase(vm_rows_per_insert_bucket{job=~\"$job\", instance=~\"$instance\"}[5m])) by (instance, vmrange)))",
            "legend": "max"
          }
        ],
        "name": "Rows per insert ($instance)",
        "links": [],
        "description": "5分钟内插入最大行数",
        "maxPerRow": 4,
        "options": {
          "tooltip": {
            "mode": "multi"
          },
          "legend": {
            "displayMode": "list",
            "placement": "bottom"
          },
          "standardOptions": {
            "util": "none",
            "min": 0,
            "decimals": 2
          },
          "thresholds": {
            "steps": [
              {
                "color": "#73BF69",
                "value": null,
                "type": "base"
              },
              {
                "color": "#F2495C",
                "value": 80
              }
            ]
          }
        },
        "custom": {
          "drawStyle": "lines",
          "lineInterpolation": "linear",
          "spanNulls": false,
          "lineWidth": 1,
          "fillOpacity": 0.5,
          "gradientMode": "none",
          "stack": "off",
          "scaleDistribution": {
            "type": "linear"
          }
        }
      },
      {
        "type": "timeseries",
        "id": "d0a46b48-be53-4034-a2e3-488bd8e18203",
        "layout": {
          "h": 8,
          "w": 12,
          "x": 0,
          "y": 242,
          "i": "d0a46b48-be53-4034-a2e3-488bd8e18203",
          "isResizable": true
        },
        "version": "2.0.0",
        "datasourceCate": "prometheus",
        "targets": [
          {
            "refId": "A",
            "expr": "max(rate(vm_rpc_send_duration_seconds_total{job=~\"$job\", instance=~\"$instance\"}[5m])) by(addr)",
            "legend": "{{addr}}"
          }
        ],
        "name": "Storage connection saturation ($instance)",
        "links": [],
        "description": "显示 vminsert 和 vmstorage 组件之间连接的饱和度。如果达到 0.9 秒的阈值，则连接饱和度超过 90%，vminsert 将无法跟上。这通常意味着必须向集群添加更多 vminsert 或 vmstorage 节点，以增加 vminsert -> vmstorage 链接的总数。",
        "maxPerRow": 4,
        "options": {
          "tooltip": {
            "mode": "multi"
          },
          "legend": {
            "displayMode": "list",
            "placement": "bottom"
          },
          "standardOptions": {
            "util": "seconds",
            "min": 0,
            "decimals": 0
          },
          "thresholds": {
            "steps": [
              {
                "color": "transparent",
                "value": null,
                "type": "base"
              },
              {
                "color": "#F2495C",
                "value": 0.9
              }
            ]
          }
        },
        "custom": {
          "drawStyle": "lines",
          "lineInterpolation": "linear",
          "spanNulls": false,
          "lineWidth": 1,
          "fillOpacity": 0.5,
          "gradientMode": "none",
          "stack": "off",
          "scaleDistribution": {
            "type": "linear"
          }
        }
      },
      {
        "type": "timeseries",
        "id": "a86e2c44-fc5c-4607-90b4-09e02b742261",
        "layout": {
          "h": 8,
          "w": 12,
          "x": 12,
          "y": 242,
          "i": "a86e2c44-fc5c-4607-90b4-09e02b742261",
          "isResizable": true
        },
        "version": "2.0.0",
        "datasourceCate": "prometheus",
        "targets": [
          {
            "refId": "A",
            "expr": "vm_rpc_vmstorage_is_reachable{job=~\"$job\", instance=~\"$instance\"} != 1",
            "legend": "{{instance}} => {{addr}}"
          }
        ],
        "name": "Storage reachability ($instance)",
        "links": [],
        "description": "当 vmstorage 节点无法访问 vminsert 时显示，默认无数据。",
        "maxPerRow": 4,
        "options": {
          "tooltip": {
            "mode": "multi"
          },
          "legend": {
            "displayMode": "list",
            "placement": "bottom"
          },
          "standardOptions": {
            "util": "none",
            "min": 0,
            "decimals": 0
          },
          "thresholds": {
            "steps": [
              {
                "color": "#73BF69",
                "value": null,
                "type": "base"
              },
              {
                "color": "#F2495C",
                "value": 80
              }
            ]
          }
        },
        "custom": {
          "drawStyle": "lines",
          "lineInterpolation": "linear",
          "spanNulls": false,
          "lineWidth": 1,
          "fillOpacity": 0.5,
          "gradientMode": "none",
          "stack": "off",
          "scaleDistribution": {
            "type": "linear"
          }
        }
      },
      {
        "version": "2.0.0",
        "id": "8d53366b-dc71-4c15-9edd-b701ba54b289",
        "type": "row",
        "name": "Drilldown",
        "collapsed": true,
        "layout": {
          "h": 1,
          "w": 24,
          "x": 0,
          "y": 250,
          "i": "8d53366b-dc71-4c15-9edd-b701ba54b289",
          "isResizable": false
        },
        "panels": []
      },
      {
        "version": "2.0.0",
        "id": "d9563990-aade-403a-afc4-d81913b5aafe",
        "type": "text",
        "links": [],
        "layout": {
          "h": 2,
          "w": 24,
          "x": 0,
          "y": 251,
          "i": "d9563990-aade-403a-afc4-d81913b5aafe",
          "isResizable": true
        },
        "targets": [],
        "options": {},
        "custom": {
          "version": "2.0.0",
          "content": "Drilldown row is used by other panels on the dashboard to show more detailed metrics per-instance."
        },
        "maxPerRow": 4
      },
      {
        "type": "timeseries",
        "id": "11dbb220-8224-4e61-a3a7-0718be6fc8ae",
        "layout": {
          "h": 8,
          "w": 12,
          "x": 0,
          "y": 253,
          "i": "11dbb220-8224-4e61-a3a7-0718be6fc8ae",
          "isResizable": true
        },
        "version": "2.0.0",
        "datasourceCate": "prometheus",
        "targets": [
          {
            "refId": "A",
            "expr": "max_over_time(process_resident_memory_bytes{job=~\"$job\", instance=~\"$instance\"}[5m])",
            "legend": "{{instance}} ({{job}})"
          }
        ],
        "name": "RSS memory usage ($instance)",
        "links": [],
        "description": "显示已用内存（常驻）。当内存使用率接近 100% 时，应用程序的性能将逐渐下降。",
        "maxPerRow": 4,
        "options": {
          "tooltip": {
            "mode": "multi"
          },
          "legend": {
            "displayMode": "list",
            "placement": "bottom"
          },
          "standardOptions": {
            "util": "bytesSI",
            "min": 0
          },
          "thresholds": {
            "steps": [
              {
                "color": "#73BF69",
                "value": null,
                "type": "base"
              }
            ]
          }
        },
        "custom": {
          "drawStyle": "lines",
          "lineInterpolation": "linear",
          "spanNulls": false,
          "lineWidth": 1,
          "fillOpacity": 0.5,
          "gradientMode": "none",
          "stack": "off",
          "scaleDistribution": {
            "type": "linear"
          }
        }
      },
      {
        "type": "timeseries",
        "id": "759dddcc-0d30-408d-9778-e4e07cd65618",
        "layout": {
          "h": 8,
          "w": 12,
          "x": 12,
          "y": 253,
          "i": "759dddcc-0d30-408d-9778-e4e07cd65618",
          "isResizable": true
        },
        "version": "2.0.0",
        "datasourceCate": "prometheus",
        "targets": [
          {
            "refId": "A",
            "expr": "max_over_time(process_resident_memory_anon_bytes{job=~\"$job\", instance=~\"$instance\"}[5m])",
            "legend": "{{instance}} ({{job}})"
          }
        ],
        "name": "RSS anonymous memory usage ($instance)",
        "links": [],
        "description": "RSS share for memory allocated by the process itself. This share cannot be freed by the OS, so it must be taken into account by OOM killer.\n\nRSS 共享由进程本身分配的内存。操作系统无法释放此共享，因此 OOM killer 必须将其考虑在内。",
        "maxPerRow": 4,
        "options": {
          "tooltip": {
            "mode": "multi"
          },
          "legend": {
            "displayMode": "list",
            "placement": "bottom"
          },
          "standardOptions": {
            "util": "bytesSI",
            "min": 0
          },
          "thresholds": {
            "steps": [
              {
                "color": "#73BF69",
                "value": null,
                "type": "base"
              }
            ]
          }
        },
        "custom": {
          "drawStyle": "lines",
          "lineInterpolation": "linear",
          "spanNulls": false,
          "lineWidth": 1,
          "fillOpacity": 0.5,
          "gradientMode": "none",
          "stack": "off",
          "scaleDistribution": {
            "type": "linear"
          }
        }
      },
      {
        "type": "timeseries",
        "id": "c61a4c5d-fea6-4dcc-89ee-1a100fa22bd2",
        "layout": {
          "h": 7,
          "w": 12,
          "x": 0,
          "y": 261,
          "i": "c61a4c5d-fea6-4dcc-89ee-1a100fa22bd2",
          "isResizable": true
        },
        "version": "2.0.0",
        "datasourceCate": "prometheus",
        "targets": [
          {
            "refId": "A",
            "expr": "sum(rate(process_cpu_seconds_total{job=~\"$job\", instance=~\"$instance\"}[5m])) by(job, instance)",
            "legend": "{{instance}} ({{job}})"
          }
        ],
        "name": "CPU usage ($instance)",
        "links": [],
        "description": "所有组件CPU使用率",
        "maxPerRow": 4,
        "options": {
          "tooltip": {
            "mode": "multi"
          },
          "legend": {
            "displayMode": "list",
            "placement": "bottom"
          },
          "standardOptions": {
            "util": "none",
            "min": 0
          },
          "thresholds": {
            "steps": [
              {
                "color": "#73BF69",
                "value": null,
                "type": "base"
              }
            ]
          }
        },
        "custom": {
          "drawStyle": "lines",
          "lineInterpolation": "linear",
          "spanNulls": false,
          "lineWidth": 1,
          "fillOpacity": 0.5,
          "gradientMode": "none",
          "stack": "off",
          "scaleDistribution": {
            "type": "linear"
          }
        }
      },
      {
        "type": "timeseries",
        "id": "5467f4d9-6922-4501-95a1-4055e0d8dd0d",
        "layout": {
          "h": 7,
          "w": 12,
          "x": 12,
          "y": 261,
          "i": "5467f4d9-6922-4501-95a1-4055e0d8dd0d",
          "isResizable": true
        },
        "version": "2.0.0",
        "datasourceCate": "prometheus",
        "targets": [
          {
            "refId": "A",
            "expr": "vm_free_disk_space_bytes{job=~\"$storage\", instance=~\"$instance\"} \n/ \nignoring(path) (\n    (\n        rate(vm_rows_added_to_storage_total{job=~\"$storage\", instance=~\"$instance\"}[1d])\n        - \n        ignoring(type) rate(vm_deduplicated_samples_total{job=~\"$storage\", instance=~\"$instance\", type=\"merge\"}[1d])\n    ) * scalar(\n            sum(vm_data_size_bytes{job=~\"$storage\", instance=~\"$instance\", type!~\"indexdb.*\"})\n            / \n            sum(vm_rows{job=~\"$storage\", instance=~\"$instance\", type!~\"indexdb.*\"})\n            )\n)",
            "legend": "{{instance}}"
          }
        ],
        "name": "Storage full ETA ($instance)",
        "links": [],
        "description": "根据以下参数显示达到 100% 磁盘容量所需的大约时间：\n\n* free disk space; 可用磁盘空间\n* row ingestion rate; 行抓取率\n* dedup rate; 去重率\n* compression. 压缩\n\n使用此面板进行容量规划，以估计磁盘空间用完的剩余时间。",
        "maxPerRow": 4,
        "options": {
          "tooltip": {
            "mode": "multi"
          },
          "legend": {
            "displayMode": "list",
            "placement": "bottom"
          },
          "standardOptions": {
            "util": "seconds",
            "min": 0
          },
          "thresholds": {
            "steps": [
              {
                "color": "#73BF69",
                "value": null,
                "type": "base"
              },
              {
                "color": "#F2495C",
                "value": 80
              }
            ]
          }
        },
        "custom": {
          "drawStyle": "lines",
          "lineInterpolation": "linear",
          "spanNulls": false,
          "lineWidth": 1,
          "fillOpacity": 0.5,
          "gradientMode": "none",
          "stack": "off",
          "scaleDistribution": {
            "type": "linear"
          }
        }
      },
      {
        "type": "timeseries",
        "id": "8b7c719e-b9d7-4ebe-b120-345b5df41df1",
        "layout": {
          "h": 8,
          "w": 12,
          "x": 0,
          "y": 268,
          "i": "8b7c719e-b9d7-4ebe-b120-345b5df41df1",
          "isResizable": true
        },
        "version": "2.0.0",
        "datasourceCate": "prometheus",
        "targets": [
          {
            "refId": "A",
            "expr": "sum(vm_data_size_bytes{job=~\"$job\", instance=~\"$instance\"}) by(job, instance)",
            "legend": ""
          }
        ],
        "name": "Disk space usage ($instance)",
        "links": [],
        "description": "显示已用磁盘空间的百分比。建议至少有 20% 的可用磁盘空间；",
        "maxPerRow": 4,
        "options": {
          "tooltip": {
            "mode": "multi"
          },
          "legend": {
            "displayMode": "list",
            "placement": "bottom"
          },
          "standardOptions": {
            "util": "bytesSI",
            "min": 0
          },
          "thresholds": {
            "steps": [
              {
                "color": "#73BF69",
                "value": null,
                "type": "base"
              }
            ]
          }
        },
        "custom": {
          "drawStyle": "lines",
          "lineInterpolation": "linear",
          "spanNulls": false,
          "lineWidth": 1,
          "fillOpacity": 0.5,
          "gradientMode": "none",
          "stack": "off",
          "scaleDistribution": {
            "type": "linear"
          }
        }
      },
      {
        "type": "timeseries",
        "id": "5d423d45-09f3-4eb0-89f4-85f1944975b9",
        "layout": {
          "h": 8,
          "w": 12,
          "x": 12,
          "y": 268,
          "i": "5d423d45-09f3-4eb0-89f4-85f1944975b9",
          "isResizable": true
        },
        "version": "2.0.0",
        "datasourceCate": "prometheus",
        "targets": [
          {
            "refId": "A",
            "expr": "sum(vm_data_size_bytes{job=~\"$job\", instance=~\"$instance\", type=~\"indexdb.*\"}) by(job, instance)",
            "legend": "{{job}}:{{instance}} (indexdb)"
          },
          {
            "refId": "B",
            "expr": "sum(vm_data_size_bytes{job=~\"$job\", instance=~\"$instance\", type!~\"indexdb.*\"}) by(job, instance)",
            "legend": "{{job}}:{{instance}} (datapoints)"
          }
        ],
        "name": "Disk space usage by type ($instance)",
        "links": [],
        "description": "使用数据类型的磁盘使用率百分比",
        "maxPerRow": 4,
        "options": {
          "tooltip": {
            "mode": "multi"
          },
          "legend": {
            "displayMode": "list",
            "placement": "bottom"
          },
          "standardOptions": {
            "util": "bytesSI",
            "min": 0
          },
          "thresholds": {
            "steps": [
              {
                "color": "#73BF69",
                "value": null,
                "type": "base"
              }
            ]
          }
        },
        "custom": {
          "drawStyle": "lines",
          "lineInterpolation": "linear",
          "spanNulls": false,
          "lineWidth": 1,
          "fillOpacity": 0.5,
          "gradientMode": "none",
          "stack": "off",
          "scaleDistribution": {
            "type": "linear"
          }
        }
      }
    ]
  }
}